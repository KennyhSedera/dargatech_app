import{r as c,j as e,m as D,L as M}from"./app-BBQBNPw2.js";import{H as T}from"./HeaderPage-CneFV302.js";import{A as $}from"./AuthenticatedLayout-X2ZRVTGC.js";import{r as W,s as H,F as O,t as z,u as V,v as B}from"./constant-Cilgxoms.js";import{d as U}from"./userService-NTgrcKPx.js";import{S as _}from"./Snackbar-_h9taCbk.js";import{C as G}from"./ConfirmDialog-Cq1B9pGB.js";import{a as A}from"./api-BwfKLlxh.js";import{M as R}from"./Modal-Bsn-sLkT.js";import{I as g}from"./InputLabel-B6xT5FEN.js";import{T as b,I as h}from"./TextInput-BQEf90rY.js";import{I as J}from"./InputImage-DzKSJlOm.js";import{S as K}from"./SelectInput-CuBzvvO7.js";import{E as Q}from"./EmptyState-B6_8d3vF.js";import"./index-D1w-IWBH.js";import"./iconBase-nIgO-Z_x.js";import"./transition-COUbI6ml.js";import"./useTheme-NcViYIL7.js";import"./index-BuB1L5f3.js";import"./index-Dsma06kH.js";const X=({partenaire:x})=>{const{id:C,user_id:k,name:f,logo:l,email:n,adresse:i,ville:j,pays:r,telephone:o,siteWeb:d,categorie:m,description:F="Partenaire commercial spécialisé dans les solutions technologiques",highlighted:S=!1}=x,[v,w]=c.useState(!1),[a,u]=c.useState(!1),[s,t]=c.useState(!1),[L,y]=c.useState({open:!1,message:"",type:"success"}),P=N=>({Fournisseur:"from-blue-500 to-indigo-600",Client:"from-green-500 to-emerald-600",Partenaire:"from-purple-500 to-violet-600",Service:"from-orange-500 to-amber-600",Sponsor:"from-red-500 to-rose-600"})[N]||"from-gray-500 to-slate-600",p=N=>({Fournisseur:"bg-blue-600",Client:"bg-green-600",Partenaire:"bg-purple-600",Service:"bg-orange-600",Sponsor:"bg-red-600"})[N]||"bg-gray-600",E=()=>{t(!0)},I=()=>{U(k).then(N=>{N.success?y({...L,open:!0,message:"Partenaire supprimé avec succès",type:"success"}):y({...L,open:!0,message:N.message,type:"error"})})};return e.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden transition-all duration-300 
        hover:shadow-xl border ${S?"border-yellow-400 dark:border-yellow-500":"border-gray-200 dark:border-gray-700"} 
        flex flex-col h-full transform hover:-translate-y-1 relative`,onMouseEnter:()=>u(!0),onMouseLeave:()=>{u(!1),w(!1)},children:[e.jsx(G,{open:s,message:"Voulez-vous vraiment supprimer ce partenaire ?",btnAcceptName:"Supprimer",title:"Suppression",btnAcceptColor:"bg-red-500 text-white",close:()=>t(!1),accept:I}),e.jsx(_,{show:L.open,message:"Partenaire supprimé avec succès",type:"success",onClose:()=>y({...L,open:!1})}),S&&e.jsx("div",{className:"absolute top-2 left-2 z-10",children:e.jsxs("span",{className:"flex items-center bg-yellow-500 text-white text-xs px-2 py-1 rounded-full shadow-md",children:[e.jsx(W,{className:"mr-1"})," Partenaire privilégié"]})}),e.jsx("div",{className:"absolute top-2 right-2 z-10",children:e.jsx("button",{className:"p-2 rounded-full transition-colors",onClick:E,children:e.jsx(H,{className:"text-red-500 dark:text-red-600"})})}),e.jsxs("div",{className:"relative pb-6",children:[e.jsxs("div",{className:`h-24 bg-gradient-to-r ${P(m)} relative overflow-hidden`,children:[e.jsx("div",{className:"absolute inset-0 opacity-30",children:e.jsx("div",{className:"absolute inset-0 bg-[url('/patterns/circuit-board.svg')] bg-repeat"})}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-12 bg-gradient-to-t from-black/20 to-transparent"})]}),e.jsx("div",{className:"absolute top-8 left-20 transform -translate-x-1/2",children:e.jsx("div",{className:`w-28 h-28 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 p-1.5 shadow-lg 
            transition-transform duration-300 ${a?"scale-105":""}`,children:l?e.jsx("img",{src:l,alt:`Logo ${f}`,className:"w-full h-full object-cover rounded-lg"}):e.jsx("div",{className:"w-full h-full rounded-lg border-2 border-gray-200 bg-gradient-to-br from-gray-100 to-gray-300 dark:from-gray-600 dark:to-gray-800 flex items-center justify-center",children:e.jsx("span",{className:"text-3xl font-bold text-gray-700 dark:text-gray-200",children:f.charAt(0).toUpperCase()})})})}),m&&e.jsx("div",{className:"absolute top-3 right-12",children:e.jsx("span",{className:`${p(m)} text-white text-xs font-medium px-3 py-1.5 rounded-lg shadow-md`,children:m})})]}),e.jsxs("div",{className:"p-6 pt-12 flex-grow",children:[e.jsx("h3",{className:"absolute top-24 right-5 text-2xl font-bold text-center text-gray-800 dark:text-white mb-2",children:f}),e.jsx("div",{className:"flex items-center justify-center mb-4"}),e.jsxs("div",{className:"space-y-3",children:[n&&e.jsxs("div",{className:"flex items-center group",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 flex items-center justify-center rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-500 dark:text-blue-400 group-hover:bg-blue-200 dark:group-hover:bg-blue-800/30 transition-colors",children:e.jsx(O,{})}),e.jsx("div",{className:"ml-3 text-sm text-gray-700 dark:text-gray-300 truncate",children:n})]}),i&&e.jsxs("div",{className:"flex items-center group",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 flex items-center justify-center rounded-full bg-green-100 dark:bg-green-900/30 text-green-500 dark:text-green-400 group-hover:bg-green-200 dark:group-hover:bg-green-800/30 transition-colors",children:e.jsx(z,{})}),e.jsxs("div",{className:"ml-3 text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("div",{children:i}),j&&r&&e.jsxs("div",{children:[j,", ",r]})]})]}),o&&e.jsxs("div",{className:"flex items-center group",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 flex items-center justify-center rounded-full bg-purple-100 dark:bg-purple-900/30 text-purple-500 dark:text-purple-400 group-hover:bg-purple-200 dark:group-hover:bg-purple-800/30 transition-colors",children:e.jsx(V,{})}),e.jsx("div",{className:"ml-3 text-sm text-gray-700 dark:text-gray-300",children:o})]}),d&&e.jsxs("div",{className:"flex items-center group",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 flex items-center justify-center rounded-full bg-amber-100 dark:bg-amber-900/30 text-amber-500 dark:text-amber-400 group-hover:bg-amber-200 dark:group-hover:bg-amber-800/30 transition-colors",children:e.jsx(B,{})}),e.jsx("div",{className:"ml-3 text-sm text-gray-700 dark:text-gray-300 truncate",children:e.jsx("a",{href:d.startsWith("http")?d:`https://${d}`,target:"_blank",className:"hover:text-blue-500",rel:"noopener noreferrer",children:d})})]})]})]})]})},Y=async()=>(await A.get("/partenaire")).data,Z=async x=>(await A.post("/partenaire",x)).data,ee=({open:x=!0,setOpen:C,dataModify:k={},onCloseFormulaire:f=()=>{}})=>{const{data:l,setData:n,errors:i,reset:j}=D({name:"",email:"",telephone:"",adresse:"",ville:"",pays:"",site_web:"",categorie:"Partenaire",description:"",highlighted:!1,logo:null}),[r,o]=c.useState(i),[d,m]=c.useState(!1),[F,S]=c.useState("Ajouter"),v=t=>{w(),C(!1),f(t)},w=()=>{j(),o({})},a=t=>{n("logo",t)},u=async()=>{m(!0),await s()},s=async()=>{var y,P;if(i.length>0){o(i);return}m(!0);const t=new FormData;["name","email","password_confirmation","telephone","adresse","ville","pays","site_web","categorie","description"].forEach(p=>{t.append(p,l[p])}),t.append("highlighted",l.highlighted?"1":"0"),l.logo instanceof File&&t.append("logo",l.logo);try{const p=await Z(t);p.success&&(v(p.message),w())}catch(p){console.error("Erreur lors de la création du partenaire:",p),o(((P=(y=p.response)==null?void 0:y.data)==null?void 0:P.errors)||{})}finally{m(!1)}};return e.jsxs(R,{show:x,closeable:!1,onClose:v,maxWidth:"xl",children:[e.jsx("div",{className:"text-2xl font-semibold text-center",children:k.id?"Modifier un partenaire":"Ajouter un partenaire"}),e.jsxs("form",{className:"grid w-full grid-cols-1 gap-4 my-6 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(g,{htmlFor:"name",value:"Nom"}),e.jsx(b,{id:"name",name:"name",value:l.name,className:"block w-full mt-1",autoComplete:"name",onChange:t=>n("name",t.target.value),required:!0,onFocus:()=>o({...r,name:""})}),e.jsx(h,{message:r.name||i.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"email",value:"Email"}),e.jsx(b,{id:"email",name:"email",value:l.email,className:"block w-full mt-1",autoComplete:"email",onChange:t=>n("email",t.target.value),required:!0,onFocus:()=>o({...r,email:""})}),e.jsx(h,{message:r.email||i.email,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"telephone",value:"Téléphone"}),e.jsx(b,{id:"telephone",name:"telephone",value:l.telephone,className:"block w-full mt-1",autoComplete:"telephone",onChange:t=>n("telephone",t.target.value),required:!0,onFocus:()=>o({...r,telephone:""})}),e.jsx(h,{message:r.telephone||i.telephone,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"adresse",value:"Adresse"}),e.jsx(b,{id:"adresse",name:"adresse",value:l.adresse,className:"block w-full mt-1",autoComplete:"adresse",onChange:t=>n("adresse",t.target.value),required:!0,onFocus:()=>o({...r,adresse:""})}),e.jsx(h,{message:r.adresse||i.adresse,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"ville",value:"Ville"}),e.jsx(b,{id:"ville",name:"ville",value:l.ville,className:"block w-full mt-1",autoComplete:"ville",onChange:t=>n("ville",t.target.value),required:!0,onFocus:()=>o({...r,ville:""})}),e.jsx(h,{message:r.ville||i.ville,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"pays",value:"Pays"}),e.jsx(b,{id:"pays",name:"pays",value:l.pays,className:"block w-full mt-1",autoComplete:"pays",onChange:t=>n("pays",t.target.value),required:!0,onFocus:()=>o({...r,pays:""})}),e.jsx(h,{message:r.pays||i.pays,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"site_web",value:"Site web"}),e.jsx(b,{id:"site_web",name:"site_web",value:l.site_web,placeholder:"www.example.com",className:"block w-full mt-1",autoComplete:"site_web",onChange:t=>n("site_web",t.target.value),required:!0,onFocus:()=>o({...r,site_web:""})}),e.jsx(h,{message:r.site_web||i.site_web,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"categorie",value:"Catégorie"}),e.jsxs(K,{id:"categorie",name:"categorie",value:l.categorie,className:"block w-full mt-1",onChange:t=>n("categorie",t.target.value),required:!0,onFocus:()=>o({...r,categorie:""}),children:[e.jsx("option",{value:"Fournisseur",children:"Fournisseur"}),e.jsx("option",{value:"Partenaire",children:"Partenaire"}),e.jsx("option",{value:"Service",children:"Service"}),e.jsx("option",{value:"Sponsor",children:"Sponsor"}),e.jsx("option",{value:"autre",children:"Autre"})]}),e.jsx(h,{message:r.categorie||i.categorie,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"description",value:"Description"}),e.jsx(b,{id:"description",name:"description",value:l.description,className:"block w-full mt-1",autoComplete:"description",onChange:t=>n("description",t.target.value),required:!0,onFocus:()=>o({...r,description:""})}),e.jsx(h,{message:r.description||i.description,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"logo",value:"Logo"}),e.jsx(J,{id:"logo",name:"logo",className:"block w-full mt-1",onLoadFile:a,required:!0,onFocus:()=>o({...r,logo:""})}),e.jsx(h,{message:r.logo||i.logo,className:"mt-2"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("button",{type:"button",className:"w-auto px-4 py-1 mr-2 text-red-600 rounded-md bg-red-400/20 disabled:cursor-not-allowed",onClick:()=>v(""),children:"Annuler"}),e.jsx("button",{type:"button",disabled:d,className:"w-auto px-4 py-1 text-white bg-blue-500 rounded-md disabled:cursor-not-allowed disabled:opacity-10",onClick:u,children:d?"Chargement...":F})]})]})},we=()=>{const[x,C]=c.useState(""),[k,f]=c.useState([]),[l,n]=c.useState([]),[i,j]=c.useState(!0),[r,o]=c.useState(!1),[d,m]=c.useState({message:"",type:"success",open:!1}),F=async()=>{const u=(await Y()).map(s=>({id:s.id,name:s.user.name,logo:s.logo,email:s.user.email,adresse:s.adresse,ville:s.ville,pays:s.pays,telephone:s.telephone,siteWeb:s.site_web,categorie:s.categorie,description:s.description,highlighted:s.highlighted,user_id:s.user_id,created_at:s.created_at,updated_at:s.updated_at}));f(u),n(u),j(!1)};c.useEffect(()=>{F()},[]);const S=(a,u)=>{m({message:a,type:u,open:!0})},v=a=>{o(!1),a&&S(a,"success"),F()},w=a=>{C(a);const u=k.filter(s=>s.name.toLowerCase().includes(a.toLowerCase())||s.email.toLowerCase().includes(a.toLowerCase())||s.categorie.toLowerCase().includes(a.toLowerCase())||s.description.toLowerCase().includes(a.toLowerCase())||s.adresse.toLowerCase().includes(a.toLowerCase())||s.ville.toLowerCase().includes(a.toLowerCase())||s.pays.toLowerCase().includes(a.toLowerCase())||s.telephone.toLowerCase().includes(a.toLowerCase())||s.siteWeb.toLowerCase().includes(a.toLowerCase()));n(u)};return e.jsxs($,{children:[e.jsx(M,{title:"Partenaires"}),e.jsx(T,{title:"Liste des partenaires",handleClick:()=>o(!0),onSearch:w,search:x}),e.jsx(ee,{open:r,setOpen:o,onCloseFormulaire:v}),e.jsx(_,{message:d.message,type:d.type,duration:3e3,onClose:()=>m({...d,open:!1}),position:"top-right",show:d.open}),i?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):e.jsx("div",{children:l.length>0?e.jsx("div",{className:"w-full h-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 p-4 gap-12",children:l.map(a=>e.jsx(X,{partenaire:a},a.id))}):e.jsx(Q,{nom:"partenaire",search:x})})]})};export{we as default};
