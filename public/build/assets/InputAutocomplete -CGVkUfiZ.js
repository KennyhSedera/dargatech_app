import{r,j as s}from"./app-BQyrTZVC.js";const k=r.forwardRef(({data:a=[],className:m="",isFocused:d=!1,defaultValue:u=null,onSelect:f,onFocus:h,...x},y)=>{const[n,l]=r.useState(""),[g,p]=r.useState([]),[b,t]=r.useState(!1),c=r.useRef(null),i=r.useRef(null);r.useImperativeHandle(y,()=>({focus:()=>{var e;return(e=c.current)==null?void 0:e.focus()}})),r.useEffect(()=>{if(u){const e=a.find(o=>o.id===u);e&&l(e.nom||e.title)}},[u,a]),r.useEffect(()=>{var e;d&&((e=c.current)==null||e.focus(),t(!0))},[d]),r.useEffect(()=>{if(n){const e=a.filter(o=>(o.nom||o.title||"").toLowerCase().includes(n.toLowerCase()));p(e),t(!0)}else p([]),t(!1)},[n,a]),r.useEffect(()=>{function e(o){i.current&&!i.current.contains(o.target)&&t(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);const w=e=>{l(e.nom||e.title),t(!1),f&&f(e)};return s.jsxs("div",{className:"relative",ref:i,children:[s.jsx("input",{...x,type:"text",value:n,onChange:e=>l(e.target.value),className:"rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-indigo-600 dark:focus:ring-indigo-600 "+m,ref:c,onFocus:()=>(t(!0),h())}),b&&s.jsx("ul",{role:"listbox",className:"absolute z-50 mt-1 w-full bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md shadow-lg max-h-48 overflow-y-auto",children:g.length>0?g.map(e=>s.jsx("li",{className:"px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer",onMouseDown:()=>w(e),children:e.nom||e.title},e.id)):n?s.jsx("li",{className:"px-4 py-2 text-gray-500 cursor-default",children:"Aucune donnée ne correspond à votre recherche."}):s.jsx("li",{className:"px-4 py-2 text-gray-500 cursor-default",children:"Faites votre recherche ..."})})]})});export{k as I};
