import{r as h,q as J,j as t}from"./app-vgO9_Dga.js";function A({headers:p,rows:g,className:P="",actions:x=[],currentPage:i=1,onPageChange:f=()=>{},onItemsPerPageChange:C=()=>{},masqueColumns:b=[],itemsPerPageOptions:I=[5,8,10,25,50,100]}){var N;const[n,L]=h.useState({key:null,direction:"asc"}),l=J().props.auth.user,D=()=>{try{const e=localStorage.getItem("itemsPerPageSettings");if(e){const s=JSON.parse(e).find(r=>r.user===l.id);return s?s.nb:10}}catch(e){console.error("Erreur lors de la lecture du localStorage:",e)}return 10},[c,M]=h.useState(D()),O=e=>{try{const a=localStorage.getItem("itemsPerPageSettings");let s=a?JSON.parse(a):[];const r=s.findIndex(o=>o.user===l.id);r!==-1?s[r].nb=e:s.push({nb:e,user:l.id}),localStorage.setItem("itemsPerPageSettings",JSON.stringify(s))}catch(a){console.error("Erreur lors de la sauvegarde dans localStorage:",a)}},R=e=>{let a="asc";n.key===e&&n.direction==="asc"&&(a="desc"),L({key:e,direction:a})},u=e=>e.sortable===!0,d=h.useMemo(()=>n.key?[...g].sort((e,a)=>{const s=e[n.key],r=a[n.key];if(s==null)return 1;if(r==null)return-1;if(typeof s=="number"&&typeof r=="number")return n.direction==="asc"?s-r:r-s;const o=new Date(s),y=new Date(r);if(!isNaN(o)&&!isNaN(y)&&s.toString().includes("-"))return n.direction==="asc"?o-y:y-o;const S=s.toString().toLowerCase(),w=r.toString().toLowerCase();return S<w?n.direction==="asc"?-1:1:S>w?n.direction==="asc"?1:-1:0}):g,[g,n]),m=i*c,k=m-c,E=d.slice(k,m),v=Math.ceil(d.length/c),j=e=>{f(e)},$=e=>{C(e),f(1),M(e),O(e)},B=e=>n.key!==e?t.jsx("svg",{className:"w-4 h-4 ml-1 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l4-4 4 4m0 6l-4 4-4-4"})}):n.direction==="asc"?t.jsx("svg",{className:"w-4 h-4 ml-1 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}):t.jsx("svg",{className:"w-4 h-4 ml-1 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})});return t.jsxs("div",{children:[t.jsx("div",{className:`overflow-auto rounded-lg shadow-sm ${P}`,children:t.jsxs("table",{className:"w-full min-w-full bg-white table-auto dark:bg-gray-800",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:t.jsxs("tr",{children:[p.map((e,a)=>!b.includes(e.key)&&t.jsx("th",{className:`px-4 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase dark:text-gray-300 ${u(e)?"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 select-none":""}`,onClick:u(e)?()=>R(e.key):void 0,children:t.jsxs("div",{className:"flex items-center",children:[e.label,u(e)&&B(e.key)]})},a)),x.length>0&&((N=l.user_role)==null?void 0:N.name)!=="partenaire"&&t.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-center text-gray-500 uppercase dark:text-gray-300",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:E.map((e,a)=>{var s;return t.jsxs("tr",{className:"transition-colors hover:bg-gray-50 dark:hover:bg-gray-700",children:[p.map((r,o)=>!b.includes(r.key)&&t.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-200",children:r.customRender?r.customRender(e[r.key],e):e[r.key]},o)),x.length>0&&((s=l.user_role)==null?void 0:s.name)!=="partenaire"&&t.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 whitespace-nowrap dark:text-gray-200",children:t.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:x.map((r,o)=>t.jsx("button",{onClick:()=>r.handler(e),className:`${r.color} rounded-md hover:${r.hoverColor} transition`,children:r.label},o))})})]},a)})})]})}),t.jsxs("div",{className:"flex flex-col items-center justify-between mt-4 space-y-3 sm:flex-row sm:space-y-0",children:[t.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Page ",i," sur ",v," (éléments"," ",k+1," à"," ",Math.min(m,d.length)," sur"," ",d.length,")"]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("label",{htmlFor:"itemsPerPage",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Afficher :"}),t.jsx("select",{id:"itemsPerPage",value:c,onChange:e=>$(Number(e.target.value)),className:"w-16 px-2 py-1 text-sm bg-transparent border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:border-gray-600 dark:text-gray-200",children:I.map(e=>t.jsx("option",{className:"bg-gray-200 dark:bg-gray-800",value:e,children:e},e))})]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>j(i-1),disabled:i===1,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed dark:text-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600",children:"Précédent"}),t.jsx("button",{onClick:()=>j(i+1),disabled:i===v,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed dark:text-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600",children:"Suivant"})]})]})]})]})}export{A as D};
