import{r as v,v as w,j as e}from"./app-rDfK0lPv.js";import{M as E}from"./Modal-ChAzlvnq.js";import{T as m,I as n}from"./TextInput-DyfXA701.js";import{I as c}from"./InputLabel-D-FJS1kQ.js";import{u as k,c as q}from"./clientService-BKs_QZwN.js";import{e as T}from"./validateForm-f9K0gDaZ.js";import{S}from"./SelectInput-BtM3O7iT.js";const D=({open:N=!0,setOpen:_,dataModify:a={},onCloseFormulaire:f=()=>{}})=>{const[F,u]=v.useState("Enregistrer"),[s,r]=v.useState({}),[x,g]=v.useState(!1),{data:t,setData:o,errors:i,reset:b}=w({nom:"",prenom:"",email:"",genre:"Homme",CIN:"",telephone:"",pays:"Togo",ville:"Kara",localisation:"",surface_cultivee:"",type_activite_agricole:""}),p=l=>{_(!1),h(),f(l)},h=()=>{b(),u("Enregistrer"),r({}),g(!1)};v.useEffect(()=>{var l,j,d,C;a.id?(o({nom:a.nom||"",prenom:a.prenom||"",email:a.email||"",genre:a.genre||"Homme",CIN:a.CIN||"",telephone:a.telephone||"",pays:((l=a.localisation)==null?void 0:l.pays)||"Togo",ville:((j=a.localisation)==null?void 0:j.ville)||"Kara",quartier:((d=a.localisation)==null?void 0:d.quartier)||"",village:((C=a.localisation)==null?void 0:C.village)||"",localisation:(a==null?void 0:a.localisation)||"",surface_cultivee:a.surface_cultivee||"",type_activite_agricole:a.type_activite_agricole||""}),u("Modifier")):h()},[a,o]);const I=async()=>{if(T(t,r)){g(!0),u(a.id?"Modification...":"Enregistrement...");try{a.id?(await k(a.id,t),p("Client modifié avec succès !")):(await q(t),p("Client créé avec succès !"))}catch(l){console.error("Erreur:",l),g(!1),u(a.id?"Modifier":"Enregistrer")}}};return e.jsxs(E,{show:N,closeable:!1,onClose:p,maxWidth:"3xl",children:[e.jsx("div",{className:"text-center font-semibold text-2xl",children:a.id?"Modifier un Maraîcher":"Ajouter un Maraîcher"}),e.jsxs("form",{className:"w-full my-6 grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"nom",value:"Nom"}),e.jsx(m,{id:"nom",name:"nom",value:t.nom,className:"mt-1 block w-full",autoComplete:"nom",isFocused:!0,onChange:l=>o("nom",l.target.value),required:!0,onFocus:()=>r({...s,nom:""})}),e.jsx(n,{message:s.nom||i.nom,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"prenom",value:"Prénom"}),e.jsx(m,{id:"prenom",name:"prenom",value:t.prenom,className:"mt-1 block w-full",autoComplete:"prenom",onChange:l=>o("prenom",l.target.value),required:!0,onFocus:()=>r({...s,prenom:""})}),e.jsx(n,{message:s.prenom||i.prenom,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"email",value:"Email"}),e.jsx(m,{id:"email",name:"email",value:t.email,className:"mt-1 block w-full",autoComplete:"email",onChange:l=>o("email",l.target.value),onFocus:()=>r({...s,email:""})}),e.jsx(n,{message:s.email||i.email,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"genre",value:"Sexe"}),e.jsxs(S,{id:"genre",type:"genre",name:"genre",value:t.genre,className:"block w-full mt-1",autoComplete:"genre",onChange:l=>o("genre",l.target.value),required:!0,children:[e.jsx("option",{value:"Homme",children:"Homme"}),e.jsx("option",{value:"Femme",children:"Femme"})]}),e.jsx(n,{message:i.genre,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"CIN",value:"Pièce d'identité"}),e.jsx(m,{id:"CIN",name:"CIN",value:t.CIN,className:"mt-1 block w-full",autoComplete:"CIN",onChange:l=>o("CIN",l.target.value),required:!0,onFocus:()=>r({...s,CIN:""})}),e.jsx(n,{message:s.CIN||i.CIN,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"telephone",value:"Téléphone"}),e.jsx(m,{id:"telephone",name:"telephone",value:t.telephone,className:"mt-1 block w-full",autoComplete:"telephone",onChange:l=>o("telephone",l.target.value),required:!0,onFocus:()=>r({...s,telephone:""})}),e.jsx(n,{message:s.telephone||i.telephone,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"localisation",value:"Localisation ou adresse"}),e.jsx(m,{id:"localisation",name:"localisation",value:t.localisation,className:"mt-1 block w-full",autoComplete:"localisation",onChange:l=>o("localisation",l.target.value),required:!0,onFocus:()=>r({...s,localisation:""})}),e.jsx(n,{message:s.localisation||i.localisation,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"type_activite_agricole",value:"Type activité agricole"}),e.jsx(m,{id:"type_activite_agricole",name:"type_activite_agricole",value:t.type_activite_agricole,className:"mt-1 block w-full",autoComplete:"type_activite_agricole",onChange:l=>o("type_activite_agricole",l.target.value),required:!0,onFocus:()=>r({...s,type_activite_agricole:""})}),e.jsx(n,{message:s.type_activite_agricole||i.type_activite_agricole,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"surface_cultivee",value:"Surface cultivée (en ha)"}),e.jsx(m,{id:"surface_cultivee",name:"surface_cultivee",value:t.surface_cultivee,className:"mt-1 block w-full",autoComplete:"surface_cultivee",onChange:l=>o("surface_cultivee",l.target.value),required:!0,onFocus:()=>r({...s,surface_cultivee:""})}),e.jsx(n,{message:s.surface_cultivee||i.surface_cultivee,className:"mt-2"})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 px-1",children:[e.jsx("button",{type:"button",className:"rounded-md py-1 px-4 text-red-500 bg-red-400/10",onClick:()=>p(""),children:"Fermer"}),e.jsx("button",{type:"submit",className:`disabled:cursor-not-allowed rounded-md py-1 px-4 bg-blue-500 text-white ${x&&"opacity-25"}`,disabled:x,onClick:I,children:F})]})]})};export{D as F};
