import{r as n,j as e,v as I,$ as q}from"./app-BCTpGmsD.js";import{H as D}from"./HeaderPage-CHhxTOJx.js";import{A as M}from"./AuthenticatedLayout-WoejUHH8.js";import{s as $,t as T,F as W,u as H,v as O,w as z}from"./constant-CLva_kaP.js";import{d as V}from"./userService-Bh7ItiT6.js";import{C as B}from"./ConfirmDialog-DL2oi4Yw.js";import{a as _}from"./api-CVEOtcPz.js";import{M as U}from"./Modal-CwCmbPOH.js";import{I as p}from"./InputLabel-CvD6hZot.js";import{T as f,I as h}from"./TextInput-CBe1B35h.js";import{I as G}from"./InputImage-q6kO0qz5.js";import{S as R}from"./SelectInput-Co5NIkm7.js";import{S as J}from"./Snackbar-Cwn-wBjx.js";import{E as K}from"./EmptyState-DBaOTPSK.js";import"./index-tCuRCMkg.js";import"./iconBase-D9bOESUt.js";import"./transition-CE7ebYdl.js";import"./useTheme-DZz2seck.js";import"./index-CIrsku27.js";import"./createLucideIcon-DvDEodQ2.js";const Q=({partenaire:x,onClose:v})=>{const{id:y,user_id:N,name:o,logo:i,email:l,adresse:j,ville:r,pays:a,telephone:m,siteWeb:d,categorie:u,description:F="Partenaire commercial spécialisé dans les solutions technologiques",highlighted:b=!1}=x,[C,k]=n.useState(!1),[t,c]=n.useState(!1),[s,P]=n.useState(!1),S=w=>({Fournisseur:"from-blue-500 to-indigo-600",Client:"from-green-500 to-emerald-600",Partenaire:"from-purple-500 to-violet-600",Service:"from-orange-500 to-amber-600",Sponsor:"from-red-500 to-rose-600"})[w]||"from-gray-500 to-slate-600",L=w=>({Fournisseur:"bg-blue-600",Client:"bg-green-600",Partenaire:"bg-purple-600",Service:"bg-orange-600",Sponsor:"bg-red-600"})[w]||"bg-gray-600",g=()=>{P(!0)},A=()=>{V(N).then(w=>{w.success?v("Partenaire supprimé avec succès"):console.log(w.message)})};return e.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden transition-all duration-300
        hover:shadow-xl border ${b?"border-yellow-400 dark:border-yellow-500":"border-gray-200 dark:border-gray-700"}
        flex flex-col h-full transform hover:-translate-y-1 relative`,onMouseEnter:()=>c(!0),onMouseLeave:()=>{c(!1),k(!1)},children:[e.jsx(B,{open:s,message:"Voulez-vous vraiment supprimer ce partenaire ?",btnAcceptName:"Supprimer",title:"Suppression",btnAcceptColor:"bg-red-500 text-white",close:()=>P(!1),accept:A}),b&&e.jsx("div",{className:"absolute z-10 top-2 left-2",children:e.jsxs("span",{className:"flex items-center px-2 py-1 text-xs text-white bg-yellow-500 rounded-full shadow-md",children:[e.jsx($,{className:"mr-1"})," Partenaire privilégié"]})}),e.jsx("div",{className:"absolute z-10 top-2 right-2",children:e.jsx("button",{className:"p-2 rounded-full transition-colors",onClick:g,children:e.jsx(T,{className:"text-red-500 dark:text-red-600"})})}),e.jsxs("div",{className:"relative pb-6",children:[e.jsxs("div",{className:`h-24 bg-gradient-to-r ${S(u)} relative overflow-hidden`,children:[e.jsx("div",{className:"absolute inset-0 opacity-30",children:e.jsx("div",{className:"absolute inset-0 bg-[url('/patterns/circuit-board.svg')] bg-repeat"})}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-12 bg-gradient-to-t from-black/20 to-transparent"})]}),e.jsx("div",{className:"absolute transform -translate-x-1/2 top-8 left-20",children:e.jsx("div",{className:`w-28 h-28 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 p-1.5 shadow-lg
            transition-transform duration-300 ${t?"scale-105":""}`,children:i?e.jsx("img",{src:i,alt:`Logo ${o}`,className:"object-cover w-full h-full rounded-lg"}):e.jsx("div",{className:"flex items-center justify-center w-full h-full border-2 border-gray-200 rounded-lg bg-gradient-to-br from-gray-100 to-gray-300 dark:from-gray-600 dark:to-gray-800",children:e.jsx("span",{className:"text-3xl font-bold text-gray-700 dark:text-gray-200",children:o.charAt(0).toUpperCase()})})})}),u&&e.jsx("div",{className:"absolute top-3 right-12",children:e.jsx("span",{className:`${L(u)} text-white text-xs font-medium px-3 py-1.5 rounded-lg shadow-md`,children:u})})]}),e.jsxs("div",{className:"flex-grow p-6 pt-12",children:[e.jsx("h3",{className:"absolute right-0 w-2/3 px-4 mb-2 text-2xl font-bold text-right text-gray-800 truncate top-24 dark:text-white",children:o}),e.jsx("div",{className:"flex items-center justify-center mb-4"}),e.jsxs("div",{className:"space-y-3",children:[l&&e.jsxs("div",{className:"flex items-center group",children:[e.jsx("div",{className:"flex items-center justify-center flex-shrink-0 w-10 h-10 text-blue-500 transition-colors bg-blue-100 rounded-full dark:bg-blue-900/30 dark:text-blue-400 group-hover:bg-blue-200 dark:group-hover:bg-blue-800/30",children:e.jsx(W,{})}),e.jsx("div",{className:"ml-3 text-sm text-gray-700 truncate dark:text-gray-300",children:l})]}),j&&e.jsxs("div",{className:"flex items-center group",children:[e.jsx("div",{className:"flex items-center justify-center flex-shrink-0 w-10 h-10 text-green-500 transition-colors bg-green-100 rounded-full dark:bg-green-900/30 dark:text-green-400 group-hover:bg-green-200 dark:group-hover:bg-green-800/30",children:e.jsx(H,{})}),e.jsxs("div",{className:"ml-3 text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("div",{children:j}),r&&a&&e.jsxs("div",{children:[r,", ",a]})]})]}),m&&e.jsxs("div",{className:"flex items-center group",children:[e.jsx("div",{className:"flex items-center justify-center flex-shrink-0 w-10 h-10 text-purple-500 transition-colors bg-purple-100 rounded-full dark:bg-purple-900/30 dark:text-purple-400 group-hover:bg-purple-200 dark:group-hover:bg-purple-800/30",children:e.jsx(O,{})}),e.jsx("div",{className:"ml-3 text-sm text-gray-700 dark:text-gray-300",children:m})]}),d&&e.jsxs("div",{className:"flex items-center group",children:[e.jsx("div",{className:"flex items-center justify-center flex-shrink-0 w-10 h-10 transition-colors rounded-full bg-amber-100 dark:bg-amber-900/30 text-amber-500 dark:text-amber-400 group-hover:bg-amber-200 dark:group-hover:bg-amber-800/30",children:e.jsx(z,{})}),e.jsx("div",{className:"ml-3 text-sm text-gray-700 truncate dark:text-gray-300",children:e.jsx("a",{href:d.startsWith("http")?d:`https://${d}`,target:"_blank",className:"hover:text-blue-500",rel:"noopener noreferrer",children:d})})]})]})]})]})},X=async()=>(await _.get("/partenaire")).data,Y=async x=>(await _.post("/partenaire",x)).data,Z=({open:x=!0,setOpen:v,dataModify:y={},onCloseFormulaire:N=()=>{}})=>{const{data:o,setData:i,errors:l,reset:j}=I({name:"",email:"",telephone:"",adresse:"",ville:"",pays:"",site_web:"",categorie:"Partenaire",description:"",highlighted:!1,logo:null}),[r,a]=n.useState(l),[m,d]=n.useState(!1),[u,F]=n.useState("Ajouter"),b=s=>{C(),v(!1),N(s)},C=()=>{j(),a({})},k=s=>{i("logo",s)},t=async()=>{d(!0),await c()},c=async()=>{var S,L;if(l.length>0){a(l);return}d(!0);const s=new FormData;["name","email","password_confirmation","telephone","adresse","ville","pays","site_web","categorie","description"].forEach(g=>{s.append(g,o[g])}),s.append("highlighted",o.highlighted?"1":"0"),o.logo instanceof File&&s.append("logo",o.logo);try{const g=await Y(s);g.success&&(b(g.message),C())}catch(g){console.error("Erreur lors de la création du partenaire:",g),a(((L=(S=g.response)==null?void 0:S.data)==null?void 0:L.errors)||{})}finally{d(!1)}};return e.jsxs(U,{show:x,closeable:!1,onClose:b,maxWidth:"xl",children:[e.jsx("div",{className:"text-2xl font-semibold text-center",children:y.id?"Modifier un partenaire":"Ajouter un partenaire"}),e.jsxs("form",{className:"grid w-full grid-cols-1 gap-4 my-6 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"name",value:"Nom"}),e.jsx(f,{id:"name",name:"name",value:o.name,className:"block w-full mt-1",autoComplete:"name",onChange:s=>i("name",s.target.value),required:!0,onFocus:()=>a({...r,name:""})}),e.jsx(h,{message:r.name||l.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"email",value:"Email"}),e.jsx(f,{id:"email",name:"email",value:o.email,className:"block w-full mt-1",autoComplete:"email",onChange:s=>i("email",s.target.value),required:!0,onFocus:()=>a({...r,email:""})}),e.jsx(h,{message:r.email||l.email,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"telephone",value:"Téléphone"}),e.jsx(f,{id:"telephone",name:"telephone",value:o.telephone,className:"block w-full mt-1",autoComplete:"telephone",onChange:s=>i("telephone",s.target.value),required:!0,onFocus:()=>a({...r,telephone:""})}),e.jsx(h,{message:r.telephone||l.telephone,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"adresse",value:"Adresse"}),e.jsx(f,{id:"adresse",name:"adresse",value:o.adresse,className:"block w-full mt-1",autoComplete:"adresse",onChange:s=>i("adresse",s.target.value),required:!0,onFocus:()=>a({...r,adresse:""})}),e.jsx(h,{message:r.adresse||l.adresse,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"ville",value:"Ville"}),e.jsx(f,{id:"ville",name:"ville",value:o.ville,className:"block w-full mt-1",autoComplete:"ville",onChange:s=>i("ville",s.target.value),required:!0,onFocus:()=>a({...r,ville:""})}),e.jsx(h,{message:r.ville||l.ville,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"pays",value:"Pays"}),e.jsx(f,{id:"pays",name:"pays",value:o.pays,className:"block w-full mt-1",autoComplete:"pays",onChange:s=>i("pays",s.target.value),required:!0,onFocus:()=>a({...r,pays:""})}),e.jsx(h,{message:r.pays||l.pays,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"site_web",value:"Site web"}),e.jsx(f,{id:"site_web",name:"site_web",value:o.site_web,placeholder:"www.example.com",className:"block w-full mt-1",autoComplete:"site_web",onChange:s=>i("site_web",s.target.value),required:!0,onFocus:()=>a({...r,site_web:""})}),e.jsx(h,{message:r.site_web||l.site_web,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"categorie",value:"Catégorie"}),e.jsxs(R,{id:"categorie",name:"categorie",value:o.categorie,className:"block w-full mt-1",onChange:s=>i("categorie",s.target.value),required:!0,onFocus:()=>a({...r,categorie:""}),children:[e.jsx("option",{value:"Fournisseur",children:"Fournisseur"}),e.jsx("option",{value:"Partenaire",children:"Partenaire"}),e.jsx("option",{value:"Service",children:"Service"}),e.jsx("option",{value:"Sponsor",children:"Sponsor"}),e.jsx("option",{value:"autre",children:"Autre"})]}),e.jsx(h,{message:r.categorie||l.categorie,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"description",value:"Description"}),e.jsx(f,{id:"description",name:"description",value:o.description,className:"block w-full mt-1",autoComplete:"description",onChange:s=>i("description",s.target.value),required:!0,onFocus:()=>a({...r,description:""})}),e.jsx(h,{message:r.description||l.description,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"logo",value:"Logo"}),e.jsx(G,{id:"logo",name:"logo",className:"block w-full mt-1",onLoadFile:k,required:!0,onFocus:()=>a({...r,logo:""})}),e.jsx(h,{message:r.logo||l.logo,className:"mt-2"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("button",{type:"button",className:"w-auto px-4 py-1 mr-2 text-red-600 rounded-md bg-red-400/20 disabled:cursor-not-allowed",onClick:()=>b(""),children:"Annuler"}),e.jsx("button",{type:"button",disabled:m,className:"w-auto px-4 py-1 text-white bg-blue-500 rounded-md disabled:cursor-not-allowed disabled:opacity-10",onClick:t,children:m?"Chargement...":u})]})]})},je=()=>{const[x,v]=n.useState(""),[y,N]=n.useState([]),[o,i]=n.useState([]),[l,j]=n.useState(!0),[r,a]=n.useState(!1),[m,d]=n.useState({message:"",type:"success",open:!1}),u=async()=>{const c=(await X()).map(s=>({id:s.id,name:s.user.name,logo:s.logo,email:s.user.email,adresse:s.adresse,ville:s.ville,pays:s.pays,telephone:s.telephone,siteWeb:s.site_web,categorie:s.categorie,description:s.description,highlighted:s.highlighted,user_id:s.user_id,created_at:s.created_at,updated_at:s.updated_at}));N(c),i(c),j(!1)};n.useEffect(()=>{u()},[]);const F=(t,c)=>{d({message:t,type:c,open:!0})},b=t=>{a(!1),t&&F(t,"success"),u()},C=t=>{a(!1),t&&F(t,"success"),u()},k=t=>{v(t);const c=y.filter(s=>s.name.toLowerCase().includes(t.toLowerCase())||s.email.toLowerCase().includes(t.toLowerCase())||s.categorie.toLowerCase().includes(t.toLowerCase())||s.description.toLowerCase().includes(t.toLowerCase())||s.adresse.toLowerCase().includes(t.toLowerCase())||s.ville.toLowerCase().includes(t.toLowerCase())||s.pays.toLowerCase().includes(t.toLowerCase())||s.telephone.toLowerCase().includes(t.toLowerCase())||s.siteWeb.toLowerCase().includes(t.toLowerCase()));i(c)};return e.jsxs(M,{children:[e.jsx(q,{title:"Partenaires"}),e.jsx(D,{title:`Liste des partenaires ( Total: ${y.length} )`,handleClick:()=>a(!0),onSearch:k,search:x}),e.jsx(Z,{open:r,setOpen:a,onCloseFormulaire:b}),e.jsx(J,{message:m.message,type:m.type,duration:3e3,onClose:()=>d({...m,open:!1}),position:"top-right",show:m.open}),l?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-t-2 border-b-2 border-blue-500 rounded-full animate-spin"})}):e.jsx("div",{children:o.length>0?e.jsx("div",{className:"grid w-full h-full grid-cols-1 gap-12 p-4 md:grid-cols-2 lg:grid-cols-3",children:o.map(t=>e.jsx(Q,{partenaire:t,onClose:C},t.id))}):e.jsx(K,{nom:"partenaire",search:x})})]})};export{je as default};
