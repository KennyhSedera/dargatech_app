import{q as I,r as N,v as U,j as e,Y as S}from"./app-Bc14thCu.js";import{T as c,I as i}from"./TextInput-B5WHqo4Z.js";import{I as n}from"./InputLabel-EGgfsVS_.js";import{P as q}from"./PrimaryButton-D_m2ma70.js";import{e as p,t as z,p as A,c as D,d as v,h as E,n as $,j as b,l as R,m as V,T as B}from"./index-BR6vvmh2.js";import{a as L}from"./api-qC64fYbA.js";import{z as M}from"./transition-BK0w5X8f.js";import"./createLucideIcon-BpnStyId.js";import"./iconBase-Cf47CWzq.js";const H=async g=>{try{return(await L.post("/profile/photo",g)).data}catch(x){throw x}};function ee({mustVerifyEmail:g,status:x,className:w="",onSuccess:j}){const t=I().props.auth.user,d=t.profile||{},m=t.technicien||{},o=t.partenaire||{},h=N.useRef(),[u,f]=N.useState(d.photo?`${d.photo}`:m.photo?`${m.photo}`:o.logo?`${o.logo}`:null),{data:a,setData:r,patch:k,errors:l,processing:_,recentlySuccessful:C}=U({name:t.name,email:t.email,genre:d.genre||m.genre||o.genre||"",contact:d.contact||m.contact||o.telephone||"",adress:d.adress||m.adress||o.adresse||"",speciality:d.speciality||m.speciality||"",ville:o.ville||"",pays:o.pays||"",site_web:o.site_web||"",categorie:o.categorie||"",description:o.description||"",highlighted:o.highlighted||!1,telegram_username:m.telegram_username||d.telegram_username||""}),F=s=>{s.preventDefault(),k(route("profile.update"),{onSuccess:()=>{j&&j()}})},T=s=>{if(s.target.files[0]){const y=new FormData;y.append("photo",s.target.files[0]),f(URL.createObjectURL(s.target.files[0])),H(y)}},P=()=>{r("photo",null),f(null),h.current&&(h.current.value="")};return e.jsx("section",{className:`${w} min-h-screen`,children:e.jsx("form",{onSubmit:F,className:"container px-4 py-8 mx-auto",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-xl dark:bg-gray-800 rounded-2xl",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsx("div",{className:"flex flex-col items-center justify-center w-full p-8 md:w-1/3 bg-gradient-to-br from-orange-500 to-pink-500 dark:from-indigo-600 dark:to-purple-700",children:e.jsxs("div",{className:"space-y-6 text-center",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"flex items-center justify-center w-48 h-48 mx-auto overflow-hidden bg-white border-4 border-white rounded-full shadow-2xl dark:bg-gray-700 dark:border-gray-800",children:u?e.jsx("img",{src:u,alt:"Aperçu",className:"object-cover w-full h-full"}):e.jsx(p,{className:"w-24 h-24 text-gray-400"})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center transition-all duration-300 bg-black bg-opacity-0 rounded-full group-hover:bg-opacity-40",children:e.jsxs("div",{className:"flex gap-3 transition-opacity duration-300 opacity-0 group-hover:opacity-100",children:[e.jsx("button",{type:"button",onClick:()=>h.current.click(),className:"p-3 text-gray-700 transition-colors duration-300 transform bg-white rounded-full shadow-lg hover:text-orange-500 dark:text-gray-200 dark:hover:text-indigo-400 hover:shadow-xl hover:-translate-y-1",children:e.jsx(z,{className:"w-6 h-6"})}),u&&e.jsx("button",{type:"button",onClick:P,className:"p-3 text-gray-700 transition-colors duration-300 transform bg-white rounded-full shadow-lg hover:text-red-500 hover:shadow-xl hover:-translate-y-1",children:e.jsx(A,{className:"w-6 h-6"})})]})})]}),e.jsx("input",{type:"file",ref:h,onChange:T,className:"hidden",accept:"image/*"}),e.jsx("p",{className:"text-lg font-medium text-white",children:a.name}),t.user_role.name==="technicien"&&e.jsx("p",{className:"text-sm text-white/80",children:a.speciality||"Votre spécialité"}),t.user_role.name==="partenaire"&&e.jsx("p",{className:"text-sm text-white/80",children:a.categorie||"Votre catégorie de partenaire"}),e.jsx("p",{className:"text-sm text-white/70",children:"Cliquez sur la photo pour la modifier"})]})}),e.jsx("div",{className:"w-full p-8 md:w-2/3",children:e.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"flex items-center gap-2 pb-2 text-xl font-medium text-gray-900 border-b border-gray-200 dark:text-gray-100 dark:border-gray-700",children:[e.jsx(p,{className:"w-6 h-6 text-orange-500 dark:text-indigo-400"}),"Informations de base"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"name",value:"Nom complet"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(p,{className:"w-5 h-5 text-gray-400"})}),e.jsx(c,{id:"name",type:"text",className:"block w-full pl-10 mt-1",value:a.name,onChange:s=>r("name",s.target.value),required:!0,isFocused:!0,autoComplete:"name"})]}),e.jsx(i,{className:"mt-2",message:l.name})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"email",value:"Adresse e-mail"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(D,{className:"w-5 h-5 text-gray-400"})}),e.jsx(c,{id:"email",type:"email",className:"block w-full pl-10 mt-1",value:a.email,onChange:s=>r("email",s.target.value),required:!0,autoComplete:"username"})]}),e.jsx(i,{className:"mt-2",message:l.email})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"genre",value:"Genre"}),e.jsxs("select",{id:"genre",className:"block w-full mt-1 border-gray-300 rounded-md shadow-sm focus:border-orange-500 dark:focus:border-indigo-600 focus:ring-orange-500 dark:focus:ring-indigo-600 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300",value:a.genre,onChange:s=>r("genre",s.target.value),children:[e.jsx("option",{value:"",children:"Sélectionnez un genre"}),e.jsx("option",{value:"Homme",children:"Homme"}),e.jsx("option",{value:"Femme",children:"Femme"}),e.jsx("option",{value:"Autre",children:"Autre"})]}),e.jsx(i,{className:"mt-2",message:l.genre})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"flex items-center gap-2 pb-2 text-xl font-medium text-gray-900 border-b border-gray-200 dark:text-gray-100 dark:border-gray-700",children:[e.jsx(v,{className:"w-6 h-6 text-orange-500 dark:text-indigo-400"}),"Informations professionnelles"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"contact",value:"Numéro de téléphone"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(E,{className:"w-5 h-5 text-gray-400"})}),e.jsx(c,{id:"contact",type:"tel",className:"block w-full pl-10 mt-1",value:a.contact,onChange:s=>r("contact",s.target.value)})]}),e.jsx(i,{className:"mt-2",message:l.contact})]}),t.user_role.name==="technicien"&&e.jsxs("div",{children:[e.jsx(n,{htmlFor:"speciality",value:"Spécialité"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(v,{className:"w-5 h-5 text-gray-400"})}),e.jsx(c,{id:"speciality",type:"text",className:"block w-full pl-10 mt-1",value:a.speciality,onChange:s=>r("speciality",s.target.value)})]}),e.jsx(i,{className:"mt-2",message:l.speciality})]}),t.user_role.name==="partenaire"&&e.jsxs("div",{children:[e.jsx(n,{htmlFor:"categorie",value:"Catégorie"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx($,{className:"w-5 h-5 text-gray-400"})}),e.jsx(c,{id:"categorie",type:"text",className:"block w-full pl-10 mt-1",value:a.categorie,onChange:s=>r("categorie",s.target.value),required:t.user_role.name==="partenaire"})]}),e.jsx(i,{className:"mt-2",message:l.categorie})]}),t.user_role.name!=="partenaire"&&e.jsxs("div",{children:[e.jsx(n,{htmlFor:"telegram_username",value:"Pseudo telegram"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(v,{className:"w-5 h-5 text-gray-400"})}),e.jsx(c,{id:"telegram_username",type:"text",className:"block w-full pl-10 mt-1",value:a.telegram_username,onChange:s=>r("telegram_username",s.target.value)})]}),e.jsx(i,{className:"mt-2",message:l.telegram_username})]}),e.jsxs("div",{className:`${t.user_role.name==="technicien"?"col-span-1":"col-span-2"} `,children:[e.jsx(n,{htmlFor:"adress",value:"Adresse"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(b,{className:"w-5 h-5 text-gray-400"})}),e.jsx(c,{id:"adress",type:"text",className:"block w-full pl-10 mt-1",value:a.adress,onChange:s=>r("adress",s.target.value)})]}),e.jsx(i,{className:"mt-2",message:l.adress})]}),t.user_role.name==="partenaire"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"ville",value:"Ville"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(b,{className:"w-5 h-5 text-gray-400"})}),e.jsx(c,{id:"ville",type:"text",className:"block w-full pl-10 mt-1",value:a.ville,onChange:s=>r("ville",s.target.value)})]}),e.jsx(i,{className:"mt-2",message:l.ville})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"pays",value:"Pays"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(R,{className:"w-5 h-5 text-gray-400"})}),e.jsx(c,{id:"pays",type:"text",className:"block w-full pl-10 mt-1",value:a.pays,onChange:s=>r("pays",s.target.value)})]}),e.jsx(i,{className:"mt-2",message:l.pays})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"site_web",value:"Site web"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(V,{className:"w-5 h-5 text-gray-400"})}),e.jsx(c,{id:"site_web",className:"block w-full pl-10 mt-1",value:a.site_web,onChange:s=>r("site_web",s.target.value),placeholder:"https://example.com"})]}),e.jsx(i,{className:"mt-2",message:l.site_web})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"highlighted",value:"Mettre en avant"}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx("input",{id:"highlighted",type:"checkbox",className:"w-5 h-5 text-orange-500 border-gray-300 rounded dark:text-indigo-600 focus:ring-orange-500 dark:focus:ring-indigo-600 dark:border-gray-700",checked:a.highlighted,onChange:s=>r("highlighted",s.target.checked)}),e.jsx("label",{htmlFor:"highlighted",className:"block ml-2 text-sm text-gray-700 dark:text-gray-200",children:"Afficher ce partenaire dans les sections mises en avant"})]}),e.jsx(i,{className:"mt-2",message:l.highlighted})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(n,{htmlFor:"description",value:"Description"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute pointer-events-none top-3 left-3",children:e.jsx(B,{className:"w-5 h-5 text-gray-400"})}),e.jsx("textarea",{id:"description",className:"block w-full pl-10 mt-1 border-gray-300 rounded-md shadow-sm focus:border-orange-500 dark:focus:border-indigo-600 focus:ring-orange-500 dark:focus:ring-indigo-600 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300",value:a.description,onChange:s=>r("description",s.target.value),rows:5,placeholder:"Décrivez votre entreprise ou organisation..."})]}),e.jsx(i,{className:"mt-2",message:l.description})]})]})]})]}),g&&t.email_verified_at===null&&e.jsxs("div",{className:"p-4 rounded-lg bg-yellow-50 dark:bg-yellow-900/20",children:[e.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:["Votre adresse e-mail n'est pas vérifiée.",e.jsx(S,{href:route("verification.send"),method:"post",as:"button",className:"ml-2 font-medium text-yellow-600 underline hover:text-yellow-700 dark:text-yellow-400 dark:hover:text-yellow-300 hover:no-underline focus:outline-none focus:ring-2 focus:ring-yellow-500 dark:focus:ring-yellow-400 focus:ring-offset-2 dark:focus:ring-offset-gray-800",children:"Cliquez ici pour renvoyer l'e-mail de vérification."})]}),x==="verification-link-sent"&&e.jsx("div",{className:"mt-2 text-sm font-medium text-green-600 dark:text-green-400",children:"Un nouveau lien de vérification a été envoyé à votre adresse e-mail."})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6",children:[e.jsx(q,{disabled:_,className:"bg-gradient-to-r from-orange-500 to-pink-500 dark:from-indigo-500 dark:to-purple-500 text-white px-8 py-3 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5 text-lg",children:"Enregistrer les modifications"}),e.jsx(M,{show:C,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:"Enregistré."})})]})]})})]})})})})}export{ee as default};
