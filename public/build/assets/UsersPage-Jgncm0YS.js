import{r as h,j as e,L as u}from"./app-Cxde9slr.js";import{A as k}from"./AuthenticatedLayout-Cny4Hpvo.js";import{a as U}from"./api-DrtQ1g-O.js";import{n as F,v as S,A as E,F as A,x as P,w as _}from"./constant-Dkjcvjdz.js";import{H}from"./HeaderPage-CH1d2zbm.js";import"./transition-BTaUzaGJ.js";import"./index-DDlNmvDD.js";import"./iconBase-CoMNK4hD.js";import"./useTheme-GXHCWeq9.js";import"./index-D3JkyBQ-.js";const I=async()=>(await U.get("/users")).data,K=()=>{const[p,w]=h.useState([]),[j,g]=h.useState([]),[y,b]=h.useState(!0),[N,L]=h.useState("");h.useEffect(()=>{(async()=>{try{const s=await I();w(s),g(s)}catch(s){console.error("Failed to fetch users:",s)}finally{b(!1)}})()},[]);const C=a=>{L(a);const s=p.filter(t=>{var r,o,i,l,n,c,d,m,x;return t.name.toLowerCase().includes(a.toLowerCase())||t.email.toLowerCase().includes(a.toLowerCase())||((r=t.technicien)==null?void 0:r.contact.toLowerCase().includes(a.toLowerCase()))||((o=t.technicien)==null?void 0:o.adress.toLowerCase().includes(a.toLowerCase()))||t.user_role.name.toLowerCase().includes(a.toLowerCase())||((i=t.profile)==null?void 0:i.adress.toLowerCase().includes(a.toLowerCase()))||((l=t.profile)==null?void 0:l.contact.toLowerCase().includes(a.toLowerCase()))||((n=t.partenaire)==null?void 0:n.name.toLowerCase().includes(a.toLowerCase()))||((c=t.partenaire)==null?void 0:c.email.toLowerCase().includes(a.toLowerCase()))||((d=t.partenaire)==null?void 0:d.telephone.toLowerCase().includes(a.toLowerCase()))||((m=t.partenaire)==null?void 0:m.adress.toLowerCase().includes(a.toLowerCase()))||((x=t.partenaire)==null?void 0:x.site_web.toLowerCase().includes(a.toLowerCase()))});g(s)},v=a=>{a.target.onerror=null,a.target.src="/path/to/default-avatar.png"};return e.jsxs(k,{children:[e.jsx(u,{title:"Users"}),e.jsx(H,{title:"Liste des utilisateurs",onSearch:C,search:N,btn:!1}),e.jsx("div",{className:"py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:y?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):p.length===0?e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:F,alt:"no data",className:"max-w-md mt-2 opacity-50"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:j.map(a=>{var s,t,r,o,i,l,n,c,d,m,x,f;return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg transform transition-all duration-300 hover:scale-105 hover:shadow-xl",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-400 via-pink-500 to-purple-600 dark:from-indigo-600 dark:via-purple-600 dark:to-blue-700 opacity-90"}),e.jsxs("div",{className:"relative pt-4 pb-14 px-6 flex justify-between items-start",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:a.name}),e.jsx("div",{className:"relative",children:e.jsx("button",{className:"p-2 text-white hover:bg-red-50 dark:hover:bg-gray-700 rounded-full transition-colors",children:e.jsx(S,{})})})]}),e.jsx("div",{className:"absolute -bottom-12 left-6",children:e.jsx("div",{className:"h-24 w-24 rounded-xl shadow-md overflow-hidden border-4 border-white dark:border-gray-800",children:(s=a.profile)!=null&&s.photo||(t=a.technicien)!=null&&t.photo||(r=a.partenaire)!=null&&r.logo?e.jsx("img",{src:((o=a.profile)==null?void 0:o.photo)||((i=a.technicien)==null?void 0:i.photo)||((l=a.partenaire)==null?void 0:l.logo),alt:`${a.name}'s profile`,className:"h-full w-full object-cover bg-gray-100 dark:bg-gray-900",onError:v}):e.jsx("div",{className:"h-full w-full bg-gradient-to-br from-gray-100 to-gray-300 dark:from-gray-700 dark:to-gray-600 flex items-center justify-center",children:e.jsx(E,{className:"text-4xl text-gray-400 dark:text-gray-300"})})})})]}),e.jsxs("div",{className:"pt-14 px-6 pb-6",children:[e.jsx("div",{className:"mt-2 mb-4",children:e.jsx("span",{className:"inline-flex items-center px-3 py-1 text-xs font-medium rounded-full bg-gradient-to-r from-green-400 to-blue-500 text-white",children:a.user_role.name})}),e.jsxs("div",{className:"space-y-3 mt-4",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(A,{className:"text-gray-500 dark:text-gray-400 mr-2"}),e.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:a.email})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(P,{className:"text-gray-500 dark:text-gray-400 mr-2"}),e.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:((n=a.technicien)==null?void 0:n.contact)||((c=a.profile)==null?void 0:c.contact)||((d=a.partenaire)==null?void 0:d.telephone)})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(_,{className:"text-gray-500 dark:text-gray-400 mr-2"}),e.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:((m=a.technicien)==null?void 0:m.adress)||((x=a.profile)==null?void 0:x.adress)||((f=a.partenaire)==null?void 0:f.adresse)})]})]})]})]},a.id)})})})})]})};export{K as default};
