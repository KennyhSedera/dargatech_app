import{q as I,r as y,v as U,j as e,Y as S}from"./app-BpSp9HcJ.js";import{T as c,I as i}from"./TextInput-DRbC3o0v.js";import{I as o}from"./InputLabel-BdEhaCq1.js";import{P as q}from"./PrimaryButton-edzR1Fap.js";import{e as u,s as z,o as A,c as D,d as N,h as E,m as R,i as b,k as V,l as $,T as B}from"./index-BIChSq2k.js";import{a as L}from"./api-CYJBVKae.js";import{z as M}from"./transition-CSjBBLmD.js";import"./createLucideIcon-D535D088.js";import"./iconBase-DxUY_fPU.js";const H=async g=>{try{return(await L.post("/profile/photo",g)).data}catch(x){throw x}};function ee({mustVerifyEmail:g,status:x,className:w="",onSuccess:v}){const r=I().props.auth.user,d=r.profile||{},m=r.technicien||{},n=r.partenaire||{},h=y.useRef(),[p,j]=y.useState(d.photo?`${d.photo}`:m.photo?`${m.photo}`:n.logo?`${n.logo}`:null),{data:a,setData:t,patch:k,errors:l,processing:C,recentlySuccessful:F}=U({name:r.name,email:r.email,genre:d.genre||m.genre||n.genre||"",contact:d.contact||m.contact||n.telephone||"",adress:d.adress||m.adress||n.adresse||"",speciality:d.speciality||m.speciality||"",ville:n.ville||"",pays:n.pays||"",site_web:n.site_web||"",categorie:n.categorie||"",description:n.description||"",highlighted:n.highlighted||!1}),T=s=>{s.preventDefault(),k(route("profile.update"),{onSuccess:()=>{v&&v()}})},_=s=>{if(s.target.files[0]){const f=new FormData;f.append("photo",s.target.files[0]),j(URL.createObjectURL(s.target.files[0])),H(f)}},P=()=>{t("photo",null),j(null),h.current&&(h.current.value="")};return e.jsx("section",{className:`${w} min-h-screen`,children:e.jsx("form",{onSubmit:T,className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsx("div",{className:"w-full md:w-1/3 bg-gradient-to-br from-orange-500 to-pink-500 dark:from-indigo-600 dark:to-purple-700 p-8 flex flex-col items-center justify-center",children:e.jsxs("div",{className:"space-y-6 text-center",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"w-48 h-48 rounded-full overflow-hidden bg-white dark:bg-gray-700 flex items-center justify-center border-4 border-white dark:border-gray-800 shadow-2xl mx-auto",children:p?e.jsx("img",{src:p,alt:"Aperçu",className:"w-full h-full object-cover"}):e.jsx(u,{className:"w-24 h-24 text-gray-400"})}),e.jsx("div",{className:"absolute inset-0 rounded-full bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-all duration-300 flex items-center justify-center",children:e.jsxs("div",{className:"flex gap-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[e.jsx("button",{type:"button",onClick:()=>h.current.click(),className:"p-3 bg-white rounded-full text-gray-700 hover:text-orange-500 dark:text-gray-200 dark:hover:text-indigo-400 transition-colors duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:e.jsx(z,{className:"w-6 h-6"})}),p&&e.jsx("button",{type:"button",onClick:P,className:"p-3 bg-white rounded-full text-gray-700 hover:text-red-500 transition-colors duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:e.jsx(A,{className:"w-6 h-6"})})]})})]}),e.jsx("input",{type:"file",ref:h,onChange:_,className:"hidden",accept:"image/*"}),e.jsx("p",{className:"text-lg text-white font-medium",children:a.name}),r.user_role.name==="technicien"&&e.jsx("p",{className:"text-sm text-white/80",children:a.speciality||"Votre spécialité"}),r.user_role.name==="partenaire"&&e.jsx("p",{className:"text-sm text-white/80",children:a.categorie||"Votre catégorie de partenaire"}),e.jsx("p",{className:"text-sm text-white/70",children:"Cliquez sur la photo pour la modifier"})]})}),e.jsx("div",{className:"w-full md:w-2/3 p-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-xl font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2 border-b border-gray-200 dark:border-gray-700 pb-2",children:[e.jsx(u,{className:"w-6 h-6 text-orange-500 dark:text-indigo-400"}),"Informations de base"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"name",value:"Nom complet"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(u,{className:"w-5 h-5 text-gray-400"})}),e.jsx(c,{id:"name",type:"text",className:"pl-10 mt-1 block w-full",value:a.name,onChange:s=>t("name",s.target.value),required:!0,isFocused:!0,autoComplete:"name"})]}),e.jsx(i,{className:"mt-2",message:l.name})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"email",value:"Adresse e-mail"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(D,{className:"w-5 h-5 text-gray-400"})}),e.jsx(c,{id:"email",type:"email",className:"pl-10 mt-1 block w-full",value:a.email,onChange:s=>t("email",s.target.value),required:!0,autoComplete:"username"})]}),e.jsx(i,{className:"mt-2",message:l.email})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"genre",value:"Genre"}),e.jsxs("select",{id:"genre",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-orange-500 dark:focus:border-indigo-600 focus:ring-orange-500 dark:focus:ring-indigo-600 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300",value:a.genre,onChange:s=>t("genre",s.target.value),children:[e.jsx("option",{value:"",children:"Sélectionnez un genre"}),e.jsx("option",{value:"Homme",children:"Homme"}),e.jsx("option",{value:"Femme",children:"Femme"}),e.jsx("option",{value:"Autre",children:"Autre"})]}),e.jsx(i,{className:"mt-2",message:l.genre})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-xl font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2 border-b border-gray-200 dark:border-gray-700 pb-2",children:[e.jsx(N,{className:"w-6 h-6 text-orange-500 dark:text-indigo-400"}),"Informations professionnelles"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"contact",value:"Numéro de téléphone"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(E,{className:"w-5 h-5 text-gray-400"})}),e.jsx(c,{id:"contact",type:"tel",className:"pl-10 mt-1 block w-full",value:a.contact,onChange:s=>t("contact",s.target.value)})]}),e.jsx(i,{className:"mt-2",message:l.contact})]}),r.user_role.name==="technicien"&&e.jsxs("div",{children:[e.jsx(o,{htmlFor:"speciality",value:"Spécialité"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(N,{className:"w-5 h-5 text-gray-400"})}),e.jsx(c,{id:"speciality",type:"text",className:"pl-10 mt-1 block w-full",value:a.speciality,onChange:s=>t("speciality",s.target.value)})]}),e.jsx(i,{className:"mt-2",message:l.speciality})]}),r.user_role.name==="partenaire"&&e.jsxs("div",{children:[e.jsx(o,{htmlFor:"categorie",value:"Catégorie"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(R,{className:"w-5 h-5 text-gray-400"})}),e.jsx(c,{id:"categorie",type:"text",className:"pl-10 mt-1 block w-full",value:a.categorie,onChange:s=>t("categorie",s.target.value),required:r.user_role.name==="partenaire"})]}),e.jsx(i,{className:"mt-2",message:l.categorie})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(o,{htmlFor:"adress",value:"Adresse"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(b,{className:"w-5 h-5 text-gray-400"})}),e.jsx(c,{id:"adress",type:"text",className:"pl-10 mt-1 block w-full",value:a.adress,onChange:s=>t("adress",s.target.value)})]}),e.jsx(i,{className:"mt-2",message:l.adress})]}),r.user_role.name==="partenaire"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"ville",value:"Ville"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(b,{className:"w-5 h-5 text-gray-400"})}),e.jsx(c,{id:"ville",type:"text",className:"pl-10 mt-1 block w-full",value:a.ville,onChange:s=>t("ville",s.target.value)})]}),e.jsx(i,{className:"mt-2",message:l.ville})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"pays",value:"Pays"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(V,{className:"w-5 h-5 text-gray-400"})}),e.jsx(c,{id:"pays",type:"text",className:"pl-10 mt-1 block w-full",value:a.pays,onChange:s=>t("pays",s.target.value)})]}),e.jsx(i,{className:"mt-2",message:l.pays})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"site_web",value:"Site web"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx($,{className:"w-5 h-5 text-gray-400"})}),e.jsx(c,{id:"site_web",className:"pl-10 mt-1 block w-full",value:a.site_web,onChange:s=>t("site_web",s.target.value),placeholder:"https://example.com"})]}),e.jsx(i,{className:"mt-2",message:l.site_web})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"highlighted",value:"Mettre en avant"}),e.jsxs("div",{className:"mt-2 flex items-center",children:[e.jsx("input",{id:"highlighted",type:"checkbox",className:"h-5 w-5 text-orange-500 dark:text-indigo-600 border-gray-300 rounded focus:ring-orange-500 dark:focus:ring-indigo-600 dark:border-gray-700",checked:a.highlighted,onChange:s=>t("highlighted",s.target.checked)}),e.jsx("label",{htmlFor:"highlighted",className:"ml-2 block text-sm text-gray-700 dark:text-gray-200",children:"Afficher ce partenaire dans les sections mises en avant"})]}),e.jsx(i,{className:"mt-2",message:l.highlighted})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(o,{htmlFor:"description",value:"Description"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-3 left-3 pointer-events-none",children:e.jsx(B,{className:"w-5 h-5 text-gray-400"})}),e.jsx("textarea",{id:"description",className:"pl-10 mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-orange-500 dark:focus:border-indigo-600 focus:ring-orange-500 dark:focus:ring-indigo-600 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300",value:a.description,onChange:s=>t("description",s.target.value),rows:5,placeholder:"Décrivez votre entreprise ou organisation..."})]}),e.jsx(i,{className:"mt-2",message:l.description})]})]})]})]}),g&&r.email_verified_at===null&&e.jsxs("div",{className:"rounded-lg bg-yellow-50 dark:bg-yellow-900/20 p-4",children:[e.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:["Votre adresse e-mail n'est pas vérifiée.",e.jsx(S,{href:route("verification.send"),method:"post",as:"button",className:"ml-2 font-medium text-yellow-600 hover:text-yellow-700 dark:text-yellow-400 dark:hover:text-yellow-300 underline hover:no-underline focus:outline-none focus:ring-2 focus:ring-yellow-500 dark:focus:ring-yellow-400 focus:ring-offset-2 dark:focus:ring-offset-gray-800",children:"Cliquez ici pour renvoyer l'e-mail de vérification."})]}),x==="verification-link-sent"&&e.jsx("div",{className:"mt-2 text-sm font-medium text-green-600 dark:text-green-400",children:"Un nouveau lien de vérification a été envoyé à votre adresse e-mail."})]}),e.jsxs("div",{className:"flex items-center gap-4 justify-end pt-6",children:[e.jsx(q,{disabled:C,className:"bg-gradient-to-r from-orange-500 to-pink-500 dark:from-indigo-500 dark:to-purple-500 text-white px-8 py-3 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5 text-lg",children:"Enregistrer les modifications"}),e.jsx(M,{show:F,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:"Enregistré."})})]})]})})]})})})})}export{ee as default};
