import{q as h,r as c}from"./app-BJfPsfag.js";function g(){const n=h().props.auth.user,i=()=>{try{const e=localStorage.getItem("themeSettings");if(e){const t=JSON.parse(e).find(s=>s.user===n.id);return t?t.theme:"light"}}catch(e){console.error("Erreur lors de la lecture du thème:",e)}return"light"},[o,d]=c.useState(i()),m=e=>{try{const r=localStorage.getItem("themeSettings");let t=r?JSON.parse(r):[];const s=t.findIndex(a=>a.user===n.id);s!==-1?t[s].theme=e:t.push({theme:e,user:n.id}),localStorage.setItem("themeSettings",JSON.stringify(t))}catch(r){console.error("Erreur lors de la sauvegarde du thème:",r)}},u=e=>{d(e),m(e)};return c.useEffect(()=>{const e=window.document.documentElement,r=t=>{t==="dark"||t==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches?e.classList.add("dark"):e.classList.remove("dark")};if(r(o),o==="system"){const t=window.matchMedia("(prefers-color-scheme: dark)"),s=a=>r(o);return t.addEventListener("change",s),()=>t.removeEventListener("change",s)}},[o]),{theme:o,setTheme:u}}export{g as u};
