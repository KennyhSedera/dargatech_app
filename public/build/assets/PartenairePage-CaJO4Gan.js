import{r as d,j as e,m as E,L as _}from"./app-CGtbL635.js";import{H as A}from"./HeaderPage-Ckkr_o-l.js";import{A as I}from"./AuthenticatedLayout-DBB9uj4u.js";import{r as q,s as M,t as T,u as $,v as D,F as V,w as W,x as H,y as z,n as O}from"./constant-Cb5i93RA.js";import{a as P}from"./api-WN51MiIe.js";import{M as B}from"./Modal-DSxLoGSv.js";import{I as c}from"./InputLabel-6zlZrN36.js";import{T as b,I as m}from"./TextInput-DRkm6zI0.js";import{I as G}from"./InputImage-D6XLioka.js";import{S as R}from"./SelectInput-Ba7Mr7dH.js";import{S as U}from"./Snackbar-TZVNPHse.js";import"./index-CTTOyiqn.js";import"./iconBase-DQgVeGog.js";import"./transition-MTEsyXJd.js";import"./index-C1o-hH6g.js";import"./useTheme-BpExcT7I.js";import"./index-CQHpVg1P.js";const J=({partenaire:i})=>{const{id:w,name:x,logo:v,email:l,adresse:n,ville:o,pays:h,telephone:r,siteWeb:t,categorie:u,description:f="Partenaire commercial spécialisé dans les solutions technologiques",highlighted:j=!1}=i,[N,g]=d.useState(!1),[s,y]=d.useState(!1),k=a=>({Fournisseur:"from-blue-500 to-indigo-600",Client:"from-green-500 to-emerald-600",Partenaire:"from-purple-500 to-violet-600",Service:"from-orange-500 to-amber-600",Sponsor:"from-red-500 to-rose-600"})[a]||"from-gray-500 to-slate-600",C=a=>({Fournisseur:"bg-blue-600",Client:"bg-green-600",Partenaire:"bg-purple-600",Service:"bg-orange-600",Sponsor:"bg-red-600"})[a]||"bg-gray-600";return e.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden transition-all duration-300 
        hover:shadow-xl border ${j?"border-yellow-400 dark:border-yellow-500":"border-gray-200 dark:border-gray-700"} 
        flex flex-col h-full transform hover:-translate-y-1 relative`,onMouseEnter:()=>y(!0),onMouseLeave:()=>{y(!1),g(!1)},children:[j&&e.jsx("div",{className:"absolute top-2 left-2 z-10",children:e.jsxs("span",{className:"flex items-center bg-yellow-500 text-white text-xs px-2 py-1 rounded-full shadow-md",children:[e.jsx(q,{className:"mr-1"})," Partenaire privilégié"]})}),e.jsxs("div",{className:"absolute top-2 right-2 z-10",children:[e.jsx("button",{className:`p-2 rounded-full ${N?"bg-gray-200 dark:bg-gray-600":"bg-gray-100 dark:bg-gray-700"} hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors`,onClick:()=>g(!N),children:e.jsx(M,{className:"text-gray-600 dark:text-gray-300"})}),N&&e.jsx("div",{className:"absolute right-0 mt-1 w-48 bg-white dark:bg-gray-700 rounded-md shadow-lg border border-gray-200 dark:border-gray-600 z-20",children:e.jsxs("div",{className:"py-1",children:[e.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600 flex items-center",children:[e.jsx(T,{className:"mr-2"})," Modifier"]}),e.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600 flex items-center",children:[e.jsx($,{className:"mr-2"})," Voir détails"]}),e.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center",children:[e.jsx(D,{className:"mr-2"})," Supprimer"]})]})})]}),e.jsxs("div",{className:"relative pb-6",children:[e.jsxs("div",{className:`h-24 bg-gradient-to-r ${k(u)} relative overflow-hidden`,children:[e.jsx("div",{className:"absolute inset-0 opacity-30",children:e.jsx("div",{className:"absolute inset-0 bg-[url('/patterns/circuit-board.svg')] bg-repeat"})}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-12 bg-gradient-to-t from-black/20 to-transparent"})]}),e.jsx("div",{className:"absolute top-8 left-20 transform -translate-x-1/2",children:e.jsx("div",{className:`w-28 h-28 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 p-1.5 shadow-lg 
            transition-transform duration-300 ${s?"scale-105":""}`,children:v?e.jsx("img",{src:v,alt:`Logo ${x}`,className:"w-full h-full object-cover rounded-full"}):e.jsx("div",{className:"w-full h-full rounded-lg border-2 border-gray-200 bg-gradient-to-br from-gray-100 to-gray-300 dark:from-gray-600 dark:to-gray-800 flex items-center justify-center",children:e.jsx("span",{className:"text-3xl font-bold text-gray-700 dark:text-gray-200",children:x.charAt(0).toUpperCase()})})})}),u&&e.jsx("div",{className:"absolute top-3 right-12",children:e.jsx("span",{className:`${C(u)} text-white text-xs font-medium px-3 py-1.5 rounded-lg shadow-md`,children:u})})]}),e.jsxs("div",{className:"p-6 pt-12 flex-grow",children:[e.jsx("h3",{className:"absolute top-24 right-5 text-2xl font-bold text-center text-gray-800 dark:text-white mb-2",children:x}),e.jsx("div",{className:"flex items-center justify-center mb-4"}),e.jsxs("div",{className:"space-y-3",children:[l&&e.jsxs("div",{className:"flex items-center group",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 flex items-center justify-center rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-500 dark:text-blue-400 group-hover:bg-blue-200 dark:group-hover:bg-blue-800/30 transition-colors",children:e.jsx(V,{})}),e.jsx("div",{className:"ml-3 text-sm text-gray-700 dark:text-gray-300 truncate",children:l})]}),n&&e.jsxs("div",{className:"flex items-center group",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 flex items-center justify-center rounded-full bg-green-100 dark:bg-green-900/30 text-green-500 dark:text-green-400 group-hover:bg-green-200 dark:group-hover:bg-green-800/30 transition-colors",children:e.jsx(W,{})}),e.jsxs("div",{className:"ml-3 text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("div",{children:n}),o&&h&&e.jsxs("div",{children:[o,", ",h]})]})]}),r&&e.jsxs("div",{className:"flex items-center group",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 flex items-center justify-center rounded-full bg-purple-100 dark:bg-purple-900/30 text-purple-500 dark:text-purple-400 group-hover:bg-purple-200 dark:group-hover:bg-purple-800/30 transition-colors",children:e.jsx(H,{})}),e.jsx("div",{className:"ml-3 text-sm text-gray-700 dark:text-gray-300",children:r})]}),t&&e.jsxs("div",{className:"flex items-center group",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 flex items-center justify-center rounded-full bg-amber-100 dark:bg-amber-900/30 text-amber-500 dark:text-amber-400 group-hover:bg-amber-200 dark:group-hover:bg-amber-800/30 transition-colors",children:e.jsx(z,{})}),e.jsx("div",{className:"ml-3 text-sm text-gray-700 dark:text-gray-300 truncate",children:e.jsx("a",{href:t.startsWith("http")?t:`https://${t}`,target:"_blank",className:"hover:text-blue-500",rel:"noopener noreferrer",children:t})})]})]})]})]})},K=async()=>(await P.get("/partenaire")).data,Q=async i=>(await P.post("/partenaire",i)).data,X=({open:i=!0,setOpen:w,dataModify:x={},onCloseFormulaire:v=()=>{}})=>{const{data:l,setData:n,errors:o,reset:h}=E({name:"",email:"",telephone:"",adresse:"",ville:"",pays:"",site_web:"",categorie:"Partenaire",description:"",highlighted:!1,logo:null}),[r,t]=d.useState(o),[u,f]=d.useState(!1),[j,N]=d.useState("Ajouter"),g=a=>{s(),w(!1),v(a)},s=()=>{h(),t({})},y=a=>{n("logo",a)},k=async()=>{f(!0),await C()},C=async()=>{var L,S;if(o.length>0){t(o);return}f(!0);const a=new FormData;["name","email","password_confirmation","telephone","adresse","ville","pays","site_web","categorie","description"].forEach(p=>{a.append(p,l[p])}),a.append("highlighted",l.highlighted?"1":"0"),l.logo instanceof File&&a.append("logo",l.logo);try{const p=await Q(a);p.status===200&&(g(p.data.message),s())}catch(p){console.error("Erreur lors de la création du partenaire:",p),t(((S=(L=p.response)==null?void 0:L.data)==null?void 0:S.errors)||{})}finally{f(!1)}};return e.jsxs(B,{show:i,closeable:!1,onClose:g,maxWidth:"xl",children:[e.jsx("div",{className:"text-2xl font-semibold text-center",children:x.id?"Modifier un partenaire":"Ajouter un partenaire"}),e.jsxs("form",{className:"grid w-full grid-cols-1 gap-4 my-6 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"name",value:"Nom"}),e.jsx(b,{id:"name",name:"name",value:l.name,className:"block w-full mt-1",autoComplete:"name",onChange:a=>n("name",a.target.value),required:!0,placeholder:"Nom du partenaire",onFocus:()=>t({...r,name:""})}),e.jsx(m,{message:r.name||o.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"email",value:"Email"}),e.jsx(b,{id:"email",name:"email",value:l.email,className:"block w-full mt-1",autoComplete:"email",onChange:a=>n("email",a.target.value),required:!0,placeholder:"Email du partenaire",onFocus:()=>t({...r,email:""})}),e.jsx(m,{message:r.email||o.email,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"telephone",value:"Téléphone"}),e.jsx(b,{id:"telephone",name:"telephone",value:l.telephone,className:"block w-full mt-1",autoComplete:"telephone",onChange:a=>n("telephone",a.target.value),required:!0,placeholder:"Téléphone du partenaire",onFocus:()=>t({...r,telephone:""})}),e.jsx(m,{message:r.telephone||o.telephone,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"adresse",value:"Adresse"}),e.jsx(b,{id:"adresse",name:"adresse",value:l.adresse,className:"block w-full mt-1",autoComplete:"adresse",onChange:a=>n("adresse",a.target.value),required:!0,placeholder:"Adresse du partenaire",onFocus:()=>t({...r,adresse:""})}),e.jsx(m,{message:r.adresse||o.adresse,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"ville",value:"Ville"}),e.jsx(b,{id:"ville",name:"ville",value:l.ville,className:"block w-full mt-1",autoComplete:"ville",onChange:a=>n("ville",a.target.value),required:!0,placeholder:"Ville du partenaire",onFocus:()=>t({...r,ville:""})}),e.jsx(m,{message:r.ville||o.ville,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"pays",value:"Pays"}),e.jsx(b,{id:"pays",name:"pays",value:l.pays,className:"block w-full mt-1",autoComplete:"pays",onChange:a=>n("pays",a.target.value),required:!0,placeholder:"Pays du partenaire",onFocus:()=>t({...r,pays:""})}),e.jsx(m,{message:r.pays||o.pays,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"site_web",value:"Site web"}),e.jsx(b,{id:"site_web",name:"site_web",value:l.site_web,className:"block w-full mt-1",autoComplete:"site_web",onChange:a=>n("site_web",a.target.value),required:!0,placeholder:"Site web du partenaire",onFocus:()=>t({...r,site_web:""})}),e.jsx(m,{message:r.site_web||o.site_web,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"categorie",value:"Catégorie"}),e.jsxs(R,{id:"categorie",name:"categorie",value:l.categorie,className:"block w-full mt-1",onChange:a=>n("categorie",a.target.value),required:!0,onFocus:()=>t({...r,categorie:""}),children:[e.jsx("option",{value:"Fournisseur",children:"Fournisseur"}),e.jsx("option",{value:"Partenaire",children:"Partenaire"}),e.jsx("option",{value:"Service",children:"Service"}),e.jsx("option",{value:"Sponsor",children:"Sponsor"}),e.jsx("option",{value:"autre",children:"Autre"})]}),e.jsx(m,{message:r.categorie||o.categorie,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"description",value:"Description"}),e.jsx(b,{id:"description",name:"description",value:l.description,className:"block w-full mt-1",autoComplete:"description",onChange:a=>n("description",a.target.value),required:!0,placeholder:"Description du partenaire",onFocus:()=>t({...r,description:""})}),e.jsx(m,{message:r.description||o.description,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"logo",value:"Logo"}),e.jsx(G,{id:"logo",name:"logo",className:"block w-full mt-1",onLoadFile:y,required:!0,onFocus:()=>t({...r,logo:""})}),e.jsx(m,{message:r.logo||o.logo,className:"mt-2"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("button",{type:"button",className:"w-auto px-4 py-1 mr-2 text-red-600 rounded-md bg-red-400/20 disabled:cursor-not-allowed",onClick:()=>g(""),children:"Annuler"}),e.jsx("button",{type:"button",disabled:u,className:"w-auto px-4 py-1 text-white bg-blue-500 rounded-md disabled:cursor-not-allowed disabled:opacity-10",onClick:k,children:u?"Chargement...":j})]})]})},he=()=>{const[i,w]=d.useState(""),[x,v]=d.useState([]),[l,n]=d.useState(!0),[o,h]=d.useState(!1),[r,t]=d.useState({message:"",type:"success",open:!1});d.useEffect(()=>{K().then(v).finally(()=>n(!1))},[]),console.log(x);const u=s=>{w(s.target.value)},f=(s,y)=>{t({message:s,type:y,open:!0})},j=s=>{s&&f(s,"success"),h(!1)},g=x.map(s=>({id:s.id,name:s.user.name,logo:s.logo,email:s.user.email,adresse:s.adresse,ville:s.ville,pays:s.pays,telephone:s.telephone,siteWeb:s.site_web,categorie:s.categorie,description:s.description,highlighted:s.highlighted})).filter(s=>s.name.toLowerCase().includes(i.toLowerCase())||s.email.toLowerCase().includes(i.toLowerCase())||s.categorie.toLowerCase().includes(i.toLowerCase())||s.description.toLowerCase().includes(i.toLowerCase())||s.adresse.toLowerCase().includes(i.toLowerCase())||s.ville.toLowerCase().includes(i.toLowerCase())||s.pays.toLowerCase().includes(i.toLowerCase())||s.telephone.toLowerCase().includes(i.toLowerCase())||s.siteWeb.toLowerCase().includes(i.toLowerCase()));return e.jsxs(I,{children:[e.jsx(_,{title:"Partenaires"}),e.jsx(A,{title:"Liste des partenaires",handleClick:()=>h(!0),onSearch:u,search:i}),e.jsx(X,{open:o,setOpen:h,onCloseFormulaire:j}),e.jsx(U,{message:r.message,type:r.type,duration:3e3,onClose:()=>t({...r,open:!1}),position:"top-right",show:r.open}),l?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):e.jsx("div",{children:g.length>0?e.jsx("div",{className:"w-full h-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 p-4 gap-12",children:g.map(s=>e.jsx(J,{partenaire:s},s.id))}):e.jsx("div",{className:"flex justify-center items-center w-full",children:e.jsx("img",{src:O,alt:"no data",className:"max-w-md mt-2 opacity-50"})})})]})};export{he as default};
