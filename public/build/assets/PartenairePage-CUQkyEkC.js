import{r as d,j as e,v as D,$ as M}from"./app-bGW8gQVj.js";import{H as $}from"./HeaderPage-B5G8aZ-r.js";import{A as T}from"./AuthenticatedLayout-CVkBJGPh.js";import{A as W,B as H,i as O,C as z,D as B,E as V}from"./constant-vxfAKWQM.js";import{d as U}from"./userService-CV7GxVuO.js";import{C as G}from"./index-DOQL15T2.js";import{a as q}from"./api-9KDcsv6L.js";import{M as R}from"./Modal-j57dhaft.js";import{I as p}from"./InputLabel-CgZ2-JDp.js";import{T as v,I as h}from"./TextInput-s67fNs0t.js";import{I as J}from"./InputImage-DN5MSQFd.js";import{S as K}from"./SelectInput-Bx5kSbrg.js";import{S as Q}from"./Snackbar-BGKq9OL_.js";import{E as X}from"./EmptyState-NMSa1Hqz.js";import"./transition-Df5wl1Hy.js";import"./iconBase-B2fljwAO.js";import"./useTheme-CYNzC_Mm.js";import"./index-C3GPFZmi.js";import"./createLucideIcon-C-CRoZJf.js";const Y=({partenaire:x,onClose:y})=>{const{id:k,user_id:F,name:o,logo:i,email:l,adresse:N,ville:r,pays:a,telephone:u,siteWeb:c,categorie:g,description:P="Partenaire commercial spécialisé dans les solutions technologiques",highlighted:f=!1}=x,[S,L]=d.useState(!1),[t,m]=d.useState(!1),[s,C]=d.useState(!1),j=b=>({Fournisseur:"from-blue-500 to-indigo-600",Client:"from-green-500 to-emerald-600",Partenaire:"from-purple-500 to-violet-600",Service:"from-orange-500 to-amber-600",Sponsor:"from-red-500 to-rose-600"})[b]||"from-gray-500 to-slate-600",w=b=>({Fournisseur:"bg-blue-600",Client:"bg-green-600",Partenaire:"bg-purple-600",Service:"bg-orange-600",Sponsor:"bg-red-600"})[b]||"bg-gray-600",n=()=>{C(!0)},_=()=>{U(F).then(b=>{b.success?y("Partenaire supprimé avec succès"):console.log(b.message)})};return e.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden transition-all duration-300
        hover:shadow-xl border ${f?"border-yellow-400 dark:border-yellow-500":"border-gray-200 dark:border-gray-700"}
        flex flex-col h-full transform hover:-translate-y-1 relative`,onMouseEnter:()=>m(!0),onMouseLeave:()=>{m(!1),L(!1)},children:[e.jsx(G,{open:s,message:"Voulez-vous vraiment supprimer ce partenaire ?",btnAcceptName:"Supprimer",title:"Suppression",btnAcceptColor:"bg-red-500 text-white",close:()=>C(!1),accept:_}),f&&e.jsx("div",{className:"absolute z-10 top-2 left-2",children:e.jsxs("span",{className:"flex items-center px-2 py-1 text-xs text-white bg-yellow-500 rounded-full shadow-md",children:[e.jsx(W,{className:"mr-1"})," Partenaire privilégié"]})}),e.jsx("div",{className:"absolute z-10 top-2 right-2",children:e.jsx("button",{className:"p-2 rounded-full transition-colors",onClick:n,children:e.jsx(H,{className:"text-red-500 dark:text-red-600"})})}),e.jsxs("div",{className:"relative pb-6",children:[e.jsxs("div",{className:`h-24 bg-gradient-to-r ${j(g)} relative overflow-hidden`,children:[e.jsx("div",{className:"absolute inset-0 opacity-30",children:e.jsx("div",{className:"absolute inset-0 bg-[url('/patterns/circuit-board.svg')] bg-repeat"})}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-12 bg-gradient-to-t from-black/20 to-transparent"})]}),e.jsx("div",{className:"absolute transform -translate-x-1/2 top-8 left-20",children:e.jsx("div",{className:`w-28 h-28 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 p-1.5 shadow-lg
            transition-transform duration-300 ${t?"scale-105":""}`,children:i?e.jsx("img",{src:i,alt:`Logo ${o}`,className:"object-cover w-full h-full rounded-lg"}):e.jsx("div",{className:"flex items-center justify-center w-full h-full border-2 border-gray-200 rounded-lg bg-gradient-to-br from-gray-100 to-gray-300 dark:from-gray-600 dark:to-gray-800",children:e.jsx("span",{className:"text-3xl font-bold text-gray-700 dark:text-gray-200",children:o.charAt(0).toUpperCase()})})})}),g&&e.jsx("div",{className:"absolute top-3 right-12",children:e.jsx("span",{className:`${w(g)} text-white text-xs font-medium px-3 py-1.5 rounded-lg shadow-md`,children:g})})]}),e.jsxs("div",{className:"flex-grow p-6 pt-12",children:[e.jsx("h3",{className:"absolute right-0 w-2/3 px-4 mb-2 text-2xl font-bold text-right text-gray-800 truncate top-24 dark:text-white",children:o}),e.jsx("div",{className:"flex items-center justify-center mb-4"}),e.jsxs("div",{className:"space-y-3",children:[l&&e.jsxs("div",{className:"flex items-center group",children:[e.jsx("div",{className:"flex items-center justify-center flex-shrink-0 w-10 h-10 text-blue-500 transition-colors bg-blue-100 rounded-full dark:bg-blue-900/30 dark:text-blue-400 group-hover:bg-blue-200 dark:group-hover:bg-blue-800/30",children:e.jsx(O,{})}),e.jsx("div",{className:"ml-3 text-sm text-gray-700 truncate dark:text-gray-300",children:l})]}),N&&e.jsxs("div",{className:"flex items-center group",children:[e.jsx("div",{className:"flex items-center justify-center flex-shrink-0 w-10 h-10 text-green-500 transition-colors bg-green-100 rounded-full dark:bg-green-900/30 dark:text-green-400 group-hover:bg-green-200 dark:group-hover:bg-green-800/30",children:e.jsx(z,{})}),e.jsxs("div",{className:"ml-3 text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("div",{children:N}),r&&a&&e.jsxs("div",{children:[r,", ",a]})]})]}),u&&e.jsxs("div",{className:"flex items-center group",children:[e.jsx("div",{className:"flex items-center justify-center flex-shrink-0 w-10 h-10 text-purple-500 transition-colors bg-purple-100 rounded-full dark:bg-purple-900/30 dark:text-purple-400 group-hover:bg-purple-200 dark:group-hover:bg-purple-800/30",children:e.jsx(B,{})}),e.jsx("div",{className:"ml-3 text-sm text-gray-700 dark:text-gray-300",children:u})]}),c&&e.jsxs("div",{className:"flex items-center group",children:[e.jsx("div",{className:"flex items-center justify-center flex-shrink-0 w-10 h-10 transition-colors rounded-full bg-amber-100 dark:bg-amber-900/30 text-amber-500 dark:text-amber-400 group-hover:bg-amber-200 dark:group-hover:bg-amber-800/30",children:e.jsx(V,{})}),e.jsx("div",{className:"ml-3 text-sm text-gray-700 truncate dark:text-gray-300",children:e.jsx("a",{href:c.startsWith("http")?c:`https://${c}`,target:"_blank",className:"hover:text-blue-500",rel:"noopener noreferrer",children:c})})]})]})]})]})},Z=async()=>(await q.get("/partenaire")).data,ee=async x=>(await q.post("/partenaire",x)).data,se=({open:x=!0,setOpen:y,dataModify:k={},onCloseFormulaire:F=()=>{}})=>{const{data:o,setData:i,errors:l,reset:N}=D({name:"",email:"",telephone:"",adresse:"",ville:"",pays:"",site_web:"",categorie:"Partenaire",description:"",highlighted:!1,logo:null}),[r,a]=d.useState(l),[u,c]=d.useState(!1),[g,P]=d.useState("Ajouter"),f=s=>{S(),y(!1),F(s)},S=()=>{N(),a({})},L=s=>{i("logo",s)},t=async()=>{c(!0),await m()},m=async()=>{var j,w;if(l.length>0){a(l);return}c(!0);const s=new FormData;["name","email","password_confirmation","telephone","adresse","ville","pays","site_web","categorie","description"].forEach(n=>{s.append(n,o[n])}),s.append("highlighted",o.highlighted?"1":"0"),o.logo instanceof File&&s.append("logo",o.logo);try{const n=await ee(s);n.success&&(f(n.message),S())}catch(n){console.error("Erreur lors de la création du partenaire:",n),a(((w=(j=n.response)==null?void 0:j.data)==null?void 0:w.errors)||{})}finally{c(!1)}};return e.jsxs(R,{show:x,closeable:!1,onClose:f,maxWidth:"xl",children:[e.jsx("div",{className:"text-2xl font-semibold text-center",children:k.id?"Modifier un partenaire":"Ajouter un partenaire"}),e.jsxs("form",{className:"grid w-full grid-cols-1 gap-4 my-6 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"name",value:"Nom"}),e.jsx(v,{id:"name",name:"name",value:o.name,className:"block w-full mt-1",autoComplete:"name",onChange:s=>i("name",s.target.value),required:!0,onFocus:()=>a({...r,name:""})}),e.jsx(h,{message:r.name||l.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"email",value:"Email"}),e.jsx(v,{id:"email",name:"email",value:o.email,className:"block w-full mt-1",autoComplete:"email",onChange:s=>i("email",s.target.value),required:!0,onFocus:()=>a({...r,email:""})}),e.jsx(h,{message:r.email||l.email,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"telephone",value:"Téléphone"}),e.jsx(v,{id:"telephone",name:"telephone",value:o.telephone,className:"block w-full mt-1",autoComplete:"telephone",onChange:s=>i("telephone",s.target.value),required:!0,onFocus:()=>a({...r,telephone:""})}),e.jsx(h,{message:r.telephone||l.telephone,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"adresse",value:"Adresse"}),e.jsx(v,{id:"adresse",name:"adresse",value:o.adresse,className:"block w-full mt-1",autoComplete:"adresse",onChange:s=>i("adresse",s.target.value),required:!0,onFocus:()=>a({...r,adresse:""})}),e.jsx(h,{message:r.adresse||l.adresse,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"ville",value:"Ville"}),e.jsx(v,{id:"ville",name:"ville",value:o.ville,className:"block w-full mt-1",autoComplete:"ville",onChange:s=>i("ville",s.target.value),required:!0,onFocus:()=>a({...r,ville:""})}),e.jsx(h,{message:r.ville||l.ville,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"pays",value:"Pays"}),e.jsx(v,{id:"pays",name:"pays",value:o.pays,className:"block w-full mt-1",autoComplete:"pays",onChange:s=>i("pays",s.target.value),required:!0,onFocus:()=>a({...r,pays:""})}),e.jsx(h,{message:r.pays||l.pays,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"site_web",value:"Site web"}),e.jsx(v,{id:"site_web",name:"site_web",value:o.site_web,placeholder:"www.example.com",className:"block w-full mt-1",autoComplete:"site_web",onChange:s=>i("site_web",s.target.value),required:!0,onFocus:()=>a({...r,site_web:""})}),e.jsx(h,{message:r.site_web||l.site_web,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"categorie",value:"Catégorie"}),e.jsxs(K,{id:"categorie",name:"categorie",value:o.categorie,className:"block w-full mt-1",onChange:s=>i("categorie",s.target.value),required:!0,onFocus:()=>a({...r,categorie:""}),children:[e.jsx("option",{value:"Fournisseur",children:"Fournisseur"}),e.jsx("option",{value:"Partenaire",children:"Partenaire"}),e.jsx("option",{value:"Service",children:"Service"}),e.jsx("option",{value:"Sponsor",children:"Sponsor"}),e.jsx("option",{value:"autre",children:"Autre"})]}),e.jsx(h,{message:r.categorie||l.categorie,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"description",value:"Description"}),e.jsx(v,{id:"description",name:"description",value:o.description,className:"block w-full mt-1",autoComplete:"description",onChange:s=>i("description",s.target.value),required:!0,onFocus:()=>a({...r,description:""})}),e.jsx(h,{message:r.description||l.description,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"logo",value:"Logo"}),e.jsx(J,{id:"logo",name:"logo",className:"block w-full mt-1",onLoadFile:L,required:!0,onFocus:()=>a({...r,logo:""})}),e.jsx(h,{message:r.logo||l.logo,className:"mt-2"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("button",{type:"button",className:"w-auto px-4 py-1 mr-2 text-red-600 rounded-md bg-red-400/20 disabled:cursor-not-allowed",onClick:()=>f(""),children:"Annuler"}),e.jsx("button",{type:"button",disabled:u,className:"w-auto px-4 py-1 text-white bg-blue-500 rounded-md disabled:cursor-not-allowed disabled:opacity-10",onClick:t,children:u?"Chargement...":g})]})]})},we=()=>{const[x,y]=d.useState(""),[k,F]=d.useState([]),[o,i]=d.useState([]),[l,N]=d.useState(!0),[r,a]=d.useState(!1),[u,c]=d.useState({message:"",type:"success",open:!1}),g=async()=>{const m=(await Z()).map(s=>({id:s.id,name:s.user.name,logo:s.logo,email:s.user.email,adresse:s.adresse,ville:s.ville,pays:s.pays,telephone:s.telephone,siteWeb:s.site_web,categorie:s.categorie,description:s.description,highlighted:s.highlighted,user_id:s.user_id,created_at:s.created_at,updated_at:s.updated_at}));F(m),i(m),N(!1)};d.useEffect(()=>{g()},[]);const P=(t,m)=>{c({message:t,type:m,open:!0})},f=t=>{a(!1),t&&P(t,"success"),g()},S=t=>{a(!1),t&&P(t,"success"),g()},L=t=>{y(t);const m=k.filter(s=>{var C,j,w,n,_,b,A,E,I;return((C=s==null?void 0:s.name)==null?void 0:C.toLowerCase().includes(t.toLowerCase()))||((j=s==null?void 0:s.email)==null?void 0:j.toLowerCase().includes(t.toLowerCase()))||((w=s==null?void 0:s.categorie)==null?void 0:w.toLowerCase().includes(t.toLowerCase()))||((n=s==null?void 0:s.description)==null?void 0:n.toLowerCase().includes(t.toLowerCase()))||((_=s==null?void 0:s.adresse)==null?void 0:_.toLowerCase().includes(t.toLowerCase()))||((b=s==null?void 0:s.ville)==null?void 0:b.toLowerCase().includes(t.toLowerCase()))||((A=s==null?void 0:s.pays)==null?void 0:A.toLowerCase().includes(t.toLowerCase()))||((E=s==null?void 0:s.telephone)==null?void 0:E.toLowerCase().includes(t.toLowerCase()))||((I=s==null?void 0:s.siteWeb)==null?void 0:I.toLowerCase().includes(t.toLowerCase()))});i(m)};return e.jsxs(T,{children:[e.jsx(M,{title:"Partenaires"}),e.jsx($,{title:`Liste des partenaires ( Total: ${k.length} )`,handleClick:()=>a(!0),onSearch:L,search:x}),e.jsx(se,{open:r,setOpen:a,onCloseFormulaire:f}),e.jsx(Q,{message:u.message,type:u.type,duration:3e3,onClose:()=>c({...u,open:!1}),position:"top-right",show:u.open}),l?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-t-2 border-b-2 border-blue-500 rounded-full animate-spin"})}):e.jsx("div",{children:o.length>0?e.jsx("div",{className:"grid w-full h-full grid-cols-1 gap-12 p-4 md:grid-cols-2 lg:grid-cols-3",children:o.map(t=>e.jsx(Y,{partenaire:t,onClose:S},t.id))}):e.jsx(X,{nom:"partenaire",search:x})})]})};export{we as default};
