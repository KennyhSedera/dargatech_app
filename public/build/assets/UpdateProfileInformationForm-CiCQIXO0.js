import{K as P,r as y,m as U,j as e,$}from"./app-Cxde9slr.js";import{T as m,I as c}from"./TextInput-DDGqk7QW.js";import{I as d}from"./InputLabel-BH2OC3Oe.js";import{P as z}from"./PrimaryButton-CEANRqZP.js";import{d as g,o as A,k as E,b as S,c as N,g as _,h as q}from"./index-DDlNmvDD.js";import{a as D}from"./api-DrtQ1g-O.js";import{z as R}from"./transition-BTaUzaGJ.js";import"./iconBase-CoMNK4hD.js";const L=async h=>{try{return(await D.post("/profile/photo",h)).data}catch(x){throw x}};function W({mustVerifyEmail:h,status:x,className:b="",onSuccess:f}){const a=P().props.auth.user,l=a.profile||{},o=a.technicien||{},i=a.partenaire||{},u=y.useRef(),[p,v]=y.useState(l.photo?`${l.photo}`:o.photo?`${o.photo}`:i.logo?`${i.logo}`:null),{data:t,setData:r,post:B,patch:w,errors:n,processing:k,recentlySuccessful:C}=U({name:a.name,email:a.email,genre:l.genre||o.genre||i.genre||"",contact:l.contact||o.contact||i.telephone||"",adress:l.adress||o.adress||i.adresse||"",speciality:l.speciality||o.speciality||i.speciality||""}),F=s=>{s.preventDefault(),w(route("profile.update"),{onSuccess:()=>{f&&f()}})},T=s=>{if(s.target.files[0]){const j=new FormData;j.append("photo",s.target.files[0]),v(URL.createObjectURL(s.target.files[0])),L(j)}},I=()=>{r("photo",null),v(null),u.current&&(u.current.value="")};return e.jsx("section",{className:`${b} min-h-screen`,children:e.jsx("form",{onSubmit:F,className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsx("div",{className:"w-full md:w-1/3 bg-gradient-to-br from-orange-500 to-pink-500 dark:from-indigo-600 dark:to-purple-700 p-8 flex flex-col items-center justify-center",children:e.jsxs("div",{className:"space-y-6 text-center",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"w-48 h-48 rounded-full overflow-hidden bg-white dark:bg-gray-700 flex items-center justify-center border-4 border-white dark:border-gray-800 shadow-2xl mx-auto",children:p?e.jsx("img",{src:p,alt:"Aperçu",className:"w-full h-full object-cover"}):e.jsx(g,{className:"w-24 h-24 text-gray-400"})}),e.jsx("div",{className:"absolute inset-0 rounded-full bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-all duration-300 flex items-center justify-center",children:e.jsxs("div",{className:"flex gap-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[e.jsx("button",{type:"button",onClick:()=>u.current.click(),className:"p-3 bg-white rounded-full text-gray-700 hover:text-orange-500 dark:text-gray-200 dark:hover:text-indigo-400 transition-colors duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:e.jsx(A,{className:"w-6 h-6"})}),p&&e.jsx("button",{type:"button",onClick:I,className:"p-3 bg-white rounded-full text-gray-700 hover:text-red-500 transition-colors duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:e.jsx(E,{className:"w-6 h-6"})})]})})]}),e.jsx("input",{type:"file",ref:u,onChange:T,className:"hidden",accept:"image/*"}),e.jsx("p",{className:"text-lg text-white font-medium",children:t.name}),a.user_role.name==="technicien"&&e.jsx("p",{className:"text-sm text-white/80",children:t.speciality||"Votre spécialité"}),e.jsx("p",{className:"text-sm text-white/70",children:"Cliquez sur la photo pour la modifier"})]})}),e.jsx("div",{className:"w-full md:w-2/3 p-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-xl font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2 border-b border-gray-200 dark:border-gray-700 pb-2",children:[e.jsx(g,{className:"w-6 h-6 text-orange-500 dark:text-indigo-400"}),"Informations de base"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"name",value:"Nom complet"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(g,{className:"w-5 h-5 text-gray-400"})}),e.jsx(m,{id:"name",type:"text",className:"pl-10 mt-1 block w-full",value:t.name,onChange:s=>r("name",s.target.value),required:!0,isFocused:!0,autoComplete:"name"})]}),e.jsx(c,{className:"mt-2",message:n.name})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"email",value:"Adresse e-mail"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(S,{className:"w-5 h-5 text-gray-400"})}),e.jsx(m,{id:"email",type:"email",className:"pl-10 mt-1 block w-full",value:t.email,onChange:s=>r("email",s.target.value),required:!0,autoComplete:"username"})]}),e.jsx(c,{className:"mt-2",message:n.email})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"genre",value:"Genre"}),e.jsxs("select",{id:"genre",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-orange-500 dark:focus:border-indigo-600 focus:ring-orange-500 dark:focus:ring-indigo-600 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300",value:t.genre,onChange:s=>r("genre",s.target.value),children:[e.jsx("option",{value:"",children:"Sélectionnez un genre"}),e.jsx("option",{value:"Homme",children:"Homme"}),e.jsx("option",{value:"Femme",children:"Femme"}),e.jsx("option",{value:"Autre",children:"Autre"})]}),e.jsx(c,{className:"mt-2",message:n.genre})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-xl font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2 border-b border-gray-200 dark:border-gray-700 pb-2",children:[e.jsx(N,{className:"w-6 h-6 text-orange-500 dark:text-indigo-400"}),"Informations professionnelles"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`${a.user_role.name!=="technicien"?"col-span-2":""}`,children:[e.jsx(d,{htmlFor:"contact",value:"Numéro de téléphone"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none w-full",children:e.jsx(_,{className:"w-5 h-5 text-gray-400"})}),e.jsx(m,{id:"contact",type:"tel",className:"pl-10 mt-1 block w-full",value:t.contact,onChange:s=>r("contact",s.target.value)})]}),e.jsx(c,{className:"mt-2",message:n.contact})]}),a.user_role.name==="technicien"&&e.jsxs("div",{children:[e.jsx(d,{htmlFor:"speciality",value:"Spécialité"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none w-full",children:e.jsx(N,{className:"w-5 h-5 text-gray-400"})}),e.jsx(m,{id:"speciality",type:"text",className:"pl-10 mt-1 block w-full",value:t.speciality,onChange:s=>r("speciality",s.target.value)})]}),e.jsx(c,{className:"mt-2",message:n.speciality})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(d,{htmlFor:"adress",value:"Adresse"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none w-full",children:e.jsx(q,{className:"w-5 h-5 text-gray-400"})}),e.jsx(m,{id:"adress",type:"text",className:"pl-10 mt-1 block w-full",value:t.adress,onChange:s=>r("adress",s.target.value)})]}),e.jsx(c,{className:"mt-2",message:n.adress})]})]})]}),h&&a.email_verified_at===null&&e.jsxs("div",{className:"rounded-lg bg-yellow-50 dark:bg-yellow-900/20 p-4",children:[e.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:["Votre adresse e-mail n'est pas vérifiée.",e.jsx($,{href:route("verification.send"),method:"post",as:"button",className:"ml-2 font-medium text-yellow-600 hover:text-yellow-700 dark:text-yellow-400 dark:hover:text-yellow-300 underline hover:no-underline focus:outline-none focus:ring-2 focus:ring-yellow-500 dark:focus:ring-yellow-400 focus:ring-offset-2 dark:focus:ring-offset-gray-800",children:"Cliquez ici pour renvoyer l'e-mail de vérification."})]}),x==="verification-link-sent"&&e.jsx("div",{className:"mt-2 text-sm font-medium text-green-600 dark:text-green-400",children:"Un nouveau lien de vérification a été envoyé à votre adresse e-mail."})]}),e.jsxs("div",{className:"flex items-center gap-4 justify-end pt-6",children:[e.jsx(z,{disabled:k,className:"bg-gradient-to-r from-orange-500 to-pink-500 dark:from-indigo-500 dark:to-purple-500 text-white px-8 py-3 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5 text-lg",children:"Enregistrer les modifications"}),e.jsx(R,{show:C,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:"Enregistré."})})]})]})})]})})})})}export{W as default};
