import{j as e,$ as u,r as d,K as p}from"./app-2sAOJLal.js";import{z as k}from"./transition-CkkwI7PH.js";import{p as N,a as b,q as w}from"./index-D0KXInPT.js";import{G as y}from"./iconBase-BIL2WQLi.js";import{u as C}from"./useTheme-1wtpr-FY.js";import{a as L,b as T}from"./index-4cULNsKg.js";import{A as M,B as S,C as D,D as P,E as z,G as I}from"./constant-CBrVezYD.js";const H=({Icon:t,route:s,label:r,active:a=!1,className:i=""})=>e.jsxs(u,{href:s,className:"group inline-flex items-center rounded-md px-1 py-1 text-sm font-medium transition duration-150 ease-in-out focus:outline-none"+(a?"bg-blue-400 text-orange-600 focus:bg-orange-700 dark:bg-indigo-600 dark:text-gray-100":"bg-transparent text-gray-400 hover:bg-gray-300 hover:text-gray-700 focus:bg-gray-300 focus:text-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-gray-300 dark:focus:bg-gray-700 dark:focus:text-gray-300")+i,children:[e.jsx("div",{className:"absolute w-52 font-semibold left-full hidden group-hover:flex",children:e.jsx("span",{className:"bg-gray-300 dark:bg-gray-700 h-8 px-2 rounded flex items-center",children:r})}),e.jsx(t,{className:"text-3xl"})]}),m=d.createContext(),l=({children:t})=>{const[s,r]=d.useState(!1),a=()=>{r(i=>!i)};return e.jsx(m.Provider,{value:{open:s,setOpen:r,toggleOpen:a},children:e.jsx("div",{className:"relative",children:t})})},F=({children:t})=>{const{open:s,setOpen:r,toggleOpen:a}=d.useContext(m);return e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:a,children:t}),s&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>r(!1)})]})},$=({align:t="right",width:s="48",contentClasses:r="py-1 bg-white dark:bg-gray-700",children:a})=>{const{open:i,setOpen:g}=d.useContext(m);let n="origin-top";t==="left"?n="ltr:origin-top-left rtl:origin-top-right start-0":t==="right"&&(n="ltr:origin-top-right rtl:origin-top-left end-0");let c="";return s==="48"&&(c="w-48"),e.jsx(e.Fragment,{children:e.jsx(k,{show:i,enter:"transition ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsx("div",{className:`absolute z-50 mt-2 rounded-md shadow-lg bg-gray-100 dark:bg-gray-900 dark:text-white ${n} ${c}`,onClick:()=>g(!1),children:e.jsx("div",{className:"rounded-md ring-1 ring-black ring-opacity-5 "+r,children:a})})})})},E=({className:t="",children:s,...r})=>e.jsx(u,{...r,className:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:bg-gray-100 focus:outline-none dark:text-gray-300 dark:hover:bg-gray-800 dark:focus:bg-gray-800 "+t,children:s}),V=({className:t="",children:s,onClick:r,...a})=>e.jsx("div",{...a,onClick:r,className:"flex gap-4 w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:bg-gray-100 focus:outline-none dark:text-gray-300 dark:hover:bg-gray-800 dark:focus:bg-gray-800 cursor-pointer"+t,children:s});l.Trigger=F;l.Content=$;l.Link=E;l.Item=V;function h({active:t=!1,className:s="",children:r,...a}){return e.jsx(u,{...a,className:`flex w-full items-start border-l-4 py-2 pe-4 ps-3 ${t?"border-indigo-400 bg-indigo-50 text-indigo-700 focus:border-indigo-700 focus:bg-indigo-100 focus:text-indigo-800 dark:border-indigo-600 dark:bg-indigo-900/50 dark:text-indigo-300 dark:focus:border-indigo-300 dark:focus:bg-indigo-900 dark:focus:text-indigo-200":"border-transparent text-gray-600 hover:border-gray-300 hover:bg-gray-50 hover:text-gray-800 focus:border-gray-300 focus:bg-gray-50 focus:text-gray-800 dark:text-gray-400 dark:hover:border-gray-600 dark:hover:bg-gray-700 dark:hover:text-gray-200 dark:focus:border-gray-600 dark:focus:bg-gray-700 dark:focus:text-gray-200"} text-base font-medium transition duration-150 ease-in-out focus:outline-none ${s}`,children:r})}function O(t){return y({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M9.8216 2.23796C9.29417 3.38265 9 4.65697 9 6C9 10.9706 13.0294 15 18 15C19.343 15 20.6174 14.7058 21.762 14.1784C20.7678 18.6537 16.7747 22 12 22C6.47715 22 2 17.5228 2 12C2 7.22532 5.3463 3.23221 9.8216 2.23796ZM18.1642 2.29104L19 2.5V3.5L18.1642 3.70896C17.4476 3.8881 16.8881 4.4476 16.709 5.16417L16.5 6H15.5L15.291 5.16417C15.1119 4.4476 14.5524 3.8881 13.8358 3.70896L13 3.5V2.5L13.8358 2.29104C14.5524 2.1119 15.1119 1.5524 15.291 0.835829L15.5 0H16.5L16.709 0.835829C16.8881 1.5524 17.4476 2.1119 18.1642 2.29104ZM23.1642 7.29104L24 7.5V8.5L23.1642 8.70896C22.4476 8.8881 21.8881 9.4476 21.709 10.1642L21.5 11H20.5L20.291 10.1642C20.1119 9.4476 19.5524 8.8881 18.8358 8.70896L18 8.5V7.5L18.8358 7.29104C19.5524 7.1119 20.1119 6.5524 20.291 5.83583L20.5 5H21.5L21.709 5.83583C21.8881 6.5524 22.4476 7.1119 23.1642 7.29104Z"},child:[]}]})(t)}const R=()=>{const t=[{icon:N,title:"light",label:"Claire"},{icon:O,title:"dark",label:"Sombre"},{icon:L,title:"system",label:"Systeme"}],{theme:s,setTheme:r}=C(),[a,i]=d.useState(t.find(n=>n.title===s)),g=n=>{i(n),r(n.title)};return e.jsx("div",{className:"relative",children:e.jsxs(l,{children:[e.jsx(l.Trigger,{children:e.jsx("button",{type:"button",className:"w-9 h-9 inline-flex items-center justify-center rounded-md p-2 text-gray-400 transition duration-150 ease-in-out hover:bg-gray-100 hover:text-gray-500 focus:bg-gray-100 focus:text-gray-500 focus:outline-none dark:text-gray-500 dark:hover:bg-gray-900 dark:hover:text-gray-400 dark:focus:bg-gray-900 dark:focus:text-gray-400",children:e.jsx(a.icon,{className:"text-lg"})})}),e.jsx(l.Content,{width:"auto",contentClasses:"border border-gray-400/20",children:t.map((n,c)=>e.jsxs(l.Item,{onClick:()=>g(n),className:a.title===n.title?"bg-gray-100 dark:bg-gray-800":"",children:[e.jsx(n.icon,{className:"text-lg"})," ",n.label]},c))})]})})},x=t=>t.trim().split(/\s+/).slice(0,2).map(r=>r[0].toUpperCase()).join(""),A=()=>{const t=p().props.auth.user,s=t.profile||{},r=t.technicien||{},a=t.partenaire||{};return e.jsx("div",{className:"relative",children:e.jsxs(l,{children:[e.jsx(l.Trigger,{children:e.jsx("button",{type:"button",className:"w-9 h-9 flex items-center rounded-full justify-center bg-gray-200 dark:bg-gray-900 border border-orange-500 dark:border-indigo-500",children:s.photo||r.photo||a.logo?e.jsx("img",{src:s.photo||r.photo||a.logo,alt:"Photo de profil",className:"w-full h-full object-cover rounded-full"}):e.jsx("span",{className:"text-lg font-bold",children:x(t.name)})})}),e.jsxs(l.Content,{width:"xl",contentClasses:" border border-gray-400/20",children:[e.jsxs("div",{className:"p-2 flex items-center gap-2 border-b border-b-gray-500/20",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-500 ring-1 ring-gray-300 rounded-full flex items-center justify-center overflow-hidden",children:s!=null&&s.photo||r!=null&&r.photo||a!=null&&a.logo?e.jsx("img",{src:(s==null?void 0:s.photo)||(r==null?void 0:r.photo)||(a==null?void 0:a.logo),alt:"Photo de profil",className:"w-12 h-12 object-cover rounded-full",onError:i=>{i.target.style.display="none",i.target.parentElement.innerHTML=`<span class='text-2xl text-white font-bold'>${x(t.name)}</span>`}}):e.jsx("span",{className:"text-2xl text-white font-bold",children:x(t.name)})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"line-clamp-1",children:t.name})," ",e.jsx(b,{className:"text-green-500"})]}),e.jsx("div",{className:"text-sm font-extralight text-gray-500",children:t.email})]})]}),e.jsx(l.Link,{href:route("profile.edit"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"text-base"})," Profile"]})}),e.jsx(l.Link,{href:route("logout"),method:"post",as:"button",className:"rounded-bl-md rounded-br-md",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{})," Se déconnecter"]})})]})]})})};function B(t){return y({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M64 384h384v-42.666H64V384zm0-106.666h384v-42.667H64v42.667zM64 128v42.665h384V128H64z"},child:[]}]})(t)}function Q({setId:t=()=>{},children:s}){const r=p().props.auth.user,a=r.profile||{},i=r.technicien||{},g=r.partenaire||{},[n,c]=d.useState(M);d.useEffect(()=>{if(r){const o=r.user_role;o&&o.name==="technicien"&&(t(r.technicien.id),c(S)),o&&o.name==="partenaire"&&c(D)}},[r]);const[f,j]=d.useState(!1);return e.jsxs("div",{className:"min-h-screen w-full bg-gray-100 dark:bg-gray-900 dark:text-white flex",children:[e.jsxs("div",{className:"hidden sm:flex sm:flex-col w-16 border-r py-1 items-center h-screen sticky top-0 border-gray-100 bg-white dark:border-gray-700 dark:bg-gray-800 z-40",children:[e.jsx("a",{href:"https://dargatech.com",target:"_blank",rel:"noreferrer",children:e.jsx("img",{src:P,alt:"logo",className:"w-12"})}),e.jsx("div",{className:"flex flex-col gap-2 mt-6 justify-center bg-red",children:n.map((o,v)=>e.jsx(H,{route:route(o.route),active:route().current(o.route),Icon:o.icon,label:o.label},o.route))})]}),e.jsxs("div",{className:"w-full",children:[e.jsxs("nav",{className:"border-b border-gray-100 bg-white dark:border-gray-700 dark:bg-gray-800 sticky top-0 z-40",children:[e.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex h-14 justify-between",children:[e.jsx("div",{className:"flex",children:e.jsx("div",{className:"flex shrink-0 items-center",children:e.jsx("a",{href:"https://dargatech.com",target:"_blank",rel:"noreferrer",children:e.jsx("img",{src:z,alt:"logo",className:"h-10"})})})}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{}),e.jsx("div",{className:"hidden sm:flex sm:items-center gap-2 ml-3",children:e.jsx(A,{})}),e.jsx("div",{className:"-me-2 flex items-center gap-2 sm:hidden",children:e.jsx("button",{onClick:()=>j(o=>!o),className:"inline-flex items-center justify-center rounded-md p-2 text-gray-400 transition duration-150 ease-in-out hover:bg-gray-100 hover:text-gray-500 focus:bg-gray-100 focus:text-gray-500 focus:outline-none dark:text-gray-500 dark:hover:bg-gray-900 dark:hover:text-gray-400 dark:focus:bg-gray-900 dark:focus:text-gray-400",children:f?e.jsx(I,{className:"text-xl"}):e.jsx(B,{className:"text-xl"})})})]})]})}),e.jsxs("div",{className:(f?"block":"hidden")+" sm:hidden",children:[e.jsx("div",{className:"space-y-1 pb-3 pt-2",children:n.map((o,v)=>e.jsx(h,{href:route(o.route),active:route().current(o.route),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o.icon,{})," ",o.label]})},o.route))}),e.jsxs("div",{className:"border-t border-gray-200 pb-1 pt-4 dark:border-gray-600",children:[e.jsxs("div",{className:"p-2 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-500 ring-1 ring-gray-300 rounded-full flex items-center justify-center",children:a.photo||i.photo||g.logo?e.jsx("img",{src:a.photo||i.photo||g.logo,alt:"Photo de profil",className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-lg font-bold",children:x(r.name)})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"line-clamp-1",children:r.name})," ",e.jsx(b,{className:"text-green-500"})]}),e.jsx("div",{className:"text-sm font-extralight text-gray-500",children:r.email})]})]}),e.jsxs("div",{className:"mt-3 space-y-1",children:[e.jsx(h,{href:route("profile.edit"),children:"Profile"}),e.jsx(h,{method:"post",href:route("logout"),as:"button",children:"Se déconnecter"})]})]})]})]}),e.jsx("main",{className:"p-2 pb-6",children:s})]})]})}export{Q as A,x as g};
