import{q as T,r as f,v as I,j as e,Y as P}from"./app-BJfPsfag.js";import{T as c,I as i}from"./TextInput-DffsfSTR.js";import{I as o}from"./InputLabel-CSzd5EZb.js";import{P as U}from"./PrimaryButton-BHgS-2RO.js";import{e as y,t as q,p as z,d as A,a as D}from"./index-DoyDqgDf.js";import{a as E}from"./api-htqHBfnF.js";import{z as S}from"./transition-DZhRA893.js";import"./createLucideIcon-pjZXBrfN.js";import"./iconBase-DqttCwT8.js";const $=async x=>{try{return(await E.post("/profile/photo",x)).data}catch(g){throw g}};function J({mustVerifyEmail:x,status:g,className:N="",onSuccess:p}){const r=T().props.auth.user,d=r.profile||{},m=r.technicien||{},n=r.partenaire||{},h=f.useRef(),[u,v]=f.useState(d.photo?`${d.photo}`:m.photo?`${m.photo}`:n.logo?`${n.logo}`:null),{data:s,setData:t,patch:b,errors:l,processing:w,recentlySuccessful:k}=I({name:r.name,email:r.email,genre:d.genre||m.genre||n.genre||"",contact:d.contact||m.contact||n.telephone||"",adress:d.adress||m.adress||n.adresse||"",speciality:d.speciality||m.speciality||"",ville:n.ville||"",pays:n.pays||"",site_web:n.site_web||"",categorie:n.categorie||"",description:n.description||"",highlighted:n.highlighted||!1,telegram_username:m.telegram_username||d.telegram_username||""}),_=a=>{a.preventDefault(),b(route("profile.update"),{onSuccess:()=>{p&&p()}})},C=a=>{if(a.target.files[0]){const j=new FormData;j.append("photo",a.target.files[0]),v(URL.createObjectURL(a.target.files[0])),$(j)}},F=()=>{t("photo",null),v(null),h.current&&(h.current.value="")};return e.jsx("section",{className:`${N} min-h-screen`,children:e.jsx("form",{onSubmit:_,className:"mx-auto ",children:e.jsx("div",{className:"overflow-hidden bg-white md:shadow-xl dark:bg-gray-800 md:rounded-2xl",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsx("div",{className:"flex flex-col items-center justify-center w-full p-8 md:w-1/3 bg-gradient-to-br from-orange-500 to-pink-500 dark:from-indigo-600 dark:to-purple-700",children:e.jsxs("div",{className:"space-y-6 text-center",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"flex items-center justify-center w-48 h-48 mx-auto overflow-hidden bg-white border-4 border-white rounded-full shadow-2xl dark:bg-gray-700 dark:border-gray-800",children:u?e.jsx("img",{src:u,alt:"Aperçu",className:"object-cover w-full h-full"}):e.jsx(y,{className:"w-24 h-24 text-gray-400"})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center transition-all duration-300 bg-black bg-opacity-0 rounded-full group-hover:bg-opacity-40",children:e.jsxs("div",{className:"flex gap-3 transition-opacity duration-300 opacity-0 group-hover:opacity-100",children:[e.jsx("button",{type:"button",onClick:()=>h.current.click(),className:"p-3 text-gray-700 transition-colors duration-300 transform bg-white rounded-full shadow-lg hover:text-orange-500 dark:text-gray-200 dark:hover:text-indigo-400 hover:shadow-xl hover:-translate-y-1",children:e.jsx(q,{className:"w-6 h-6"})}),u&&e.jsx("button",{type:"button",onClick:F,className:"p-3 text-gray-700 transition-colors duration-300 transform bg-white rounded-full shadow-lg hover:text-red-500 hover:shadow-xl hover:-translate-y-1",children:e.jsx(z,{className:"w-6 h-6"})})]})})]}),e.jsx("input",{type:"file",ref:h,onChange:C,className:"hidden",accept:"image/*"}),e.jsx("p",{className:"text-lg font-medium text-white",children:s.name}),r.user_role.name==="technicien"&&e.jsx("p",{className:"text-sm text-white/80",children:s.speciality||"Votre spécialité"}),r.user_role.name==="partenaire"&&e.jsx("p",{className:"text-sm text-white/80",children:s.categorie||"Votre catégorie de partenaire"}),e.jsx("p",{className:"text-sm text-white/70",children:"Cliquez sur la photo pour la modifier"})]})}),e.jsxs("div",{className:"w-full p-8 md:w-2/3",children:[e.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"flex items-center gap-2 pb-2 text-xl font-medium text-gray-900 border-b border-gray-200 dark:text-gray-100 dark:border-gray-700",children:[e.jsx(y,{className:"w-6 h-6 text-orange-500 dark:text-indigo-400"}),"Informations de base"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"name",value:"Nom complet"}),e.jsx("div",{className:"relative",children:e.jsx(c,{id:"name",type:"text",className:"block w-full mt-1",value:s.name,onChange:a=>t("name",a.target.value),required:!0,isFocused:!0,autoComplete:"name"})}),e.jsx(i,{className:"mt-2",message:l.name})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"email",value:"Adresse e-mail"}),e.jsx("div",{className:"relative",children:e.jsx(c,{id:"email",type:"email",className:"block w-full mt-1",value:s.email,onChange:a=>t("email",a.target.value),required:!0,autoComplete:"username"})}),e.jsx(i,{className:"mt-2",message:l.email})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"genre",value:"Genre"}),e.jsxs("select",{id:"genre",className:"block w-full mt-1 border-gray-300 rounded-md shadow-sm focus:border-orange-500 dark:focus:border-indigo-600 focus:ring-orange-500 dark:focus:ring-indigo-600 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300",value:s.genre,onChange:a=>t("genre",a.target.value),children:[e.jsx("option",{value:"",children:"Sélectionnez un genre"}),e.jsx("option",{value:"Homme",children:"Homme"}),e.jsx("option",{value:"Femme",children:"Femme"}),e.jsx("option",{value:"Autre",children:"Autre"})]}),e.jsx(i,{className:"mt-2",message:l.genre})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"flex items-center gap-2 pb-2 text-xl font-medium text-gray-900 border-b border-gray-200 dark:text-gray-100 dark:border-gray-700",children:[e.jsx(A,{className:"w-6 h-6 text-orange-500 dark:text-indigo-400"}),"Informations professionnelles"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"col-span-2 md:col-span-1",children:[e.jsx(o,{htmlFor:"contact",value:"Numéro de téléphone"}),e.jsx("div",{className:"relative",children:e.jsx(c,{id:"contact",type:"tel",className:"block w-full mt-1",value:s.contact,onChange:a=>t("contact",a.target.value)})}),e.jsx(i,{className:"mt-2",message:l.contact})]}),r.user_role.name==="technicien"&&e.jsxs("divv",{className:"col-span-2 md:col-span-1",children:[e.jsx(o,{htmlFor:"speciality",value:"Spécialité"}),e.jsx("div",{className:"relative",children:e.jsx(c,{id:"speciality",type:"text",className:"block w-full mt-1",value:s.speciality,onChange:a=>t("speciality",a.target.value)})}),e.jsx(i,{className:"mt-2",message:l.speciality})]}),r.user_role.name==="partenaire"&&e.jsxs("div",{className:"col-span-2 md:col-span-1",children:[e.jsx(o,{htmlFor:"categorie",value:"Catégorie"}),e.jsx("div",{className:"relative",children:e.jsx(c,{id:"categorie",type:"text",className:"block w-full mt-1",value:s.categorie,onChange:a=>t("categorie",a.target.value),required:r.user_role.name==="partenaire"})}),e.jsx(i,{className:"mt-2",message:l.categorie})]}),r.user_role.name!=="partenaire"&&e.jsxs("div",{className:"col-span-2 md:col-span-1",children:[e.jsx(o,{htmlFor:"telegram_username",value:"Pseudo Telegram"}),e.jsx("div",{className:"relative",children:e.jsx(c,{id:"telegram_username",type:"text",className:"block w-full mt-1",value:s.telegram_username,onChange:a=>t("telegram_username",a.target.value)})}),e.jsx(i,{className:"mt-2",message:l.telegram_username})]}),e.jsxs("div",{className:`${r.user_role.name==="technicien"?"col-span-2 md:col-span-1":"col-span-2"}`,children:[e.jsx(o,{htmlFor:"adress",value:"Adresse"}),e.jsx(c,{id:"adress",type:"text",className:"block w-full mt-1",value:s.adress,onChange:a=>t("adress",a.target.value)})]}),e.jsx(i,{className:"mt-2",message:l.adress})]}),r.user_role.name==="partenaire"&&e.jsxs("div",{className:"grid grid-cols-1 gap-4 mt-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"ville",value:"Ville"}),e.jsx("div",{className:"relative",children:e.jsx(c,{id:"ville",type:"text",className:"block w-full mt-1",value:s.ville,onChange:a=>t("ville",a.target.value)})}),e.jsx(i,{className:"mt-2",message:l.ville})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"pays",value:"Pays"}),e.jsx("div",{className:"relative",children:e.jsx(c,{id:"pays",type:"text",className:"block w-full mt-1",value:s.pays,onChange:a=>t("pays",a.target.value)})}),e.jsx(i,{className:"mt-2",message:l.pays})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"site_web",value:"Site web"}),e.jsx("div",{className:"relative",children:e.jsx(c,{id:"site_web",className:"block w-full mt-1",value:s.site_web,onChange:a=>t("site_web",a.target.value),placeholder:"https://example.com"})}),e.jsx(i,{className:"mt-2",message:l.site_web})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"highlighted",value:"Mettre en avant"}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx("input",{id:"highlighted",type:"checkbox",className:"w-5 h-5 text-orange-500 border-gray-300 rounded dark:text-indigo-600 focus:ring-orange-500 dark:focus:ring-indigo-600 dark:border-gray-700",checked:s.highlighted,onChange:a=>t("highlighted",a.target.checked)}),e.jsx("label",{htmlFor:"highlighted",className:"block ml-2 text-sm text-gray-700 dark:text-gray-200",children:"Afficher ce partenaire dans les sections mises en avant"})]}),e.jsx(i,{className:"mt-2",message:l.highlighted})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(o,{htmlFor:"description",value:"Description"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute pointer-events-none top-3 left-3",children:e.jsx(D,{className:"w-5 h-5 text-gray-400"})}),e.jsx("textarea",{id:"description",className:"block w-full mt-1 border-gray-300 rounded-md shadow-sm focus:border-orange-500 dark:focus:border-indigo-600 focus:ring-orange-500 dark:focus:ring-indigo-600 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300",value:s.description,onChange:a=>t("description",a.target.value),rows:5,placeholder:"Décrivez votre entreprise ou organisation..."})]}),e.jsx(i,{className:"mt-2",message:l.description})]})]})]})]}),x&&r.email_verified_at===null&&e.jsxs("div",{className:"p-4 rounded-lg bg-yellow-50 dark:bg-yellow-900/20",children:[e.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:["Votre adresse e-mail n'est pas vérifiée.",e.jsx(P,{href:route("verification.send"),method:"post",as:"button",className:"ml-2 font-medium text-yellow-600 underline hover:text-yellow-700 dark:text-yellow-400 dark:hover:text-yellow-300 hover:no-underline focus:outline-none focus:ring-2 focus:ring-yellow-500 dark:focus:ring-yellow-400 focus:ring-offset-2 dark:focus:ring-offset-gray-800",children:"Cliquez ici pour renvoyer l'e-mail de vérification."})]}),g==="verification-link-sent"&&e.jsx("div",{className:"mt-2 text-sm font-medium text-green-600 dark:text-green-400",children:"Un nouveau lien de vérification a été envoyé à votre adresse e-mail."})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6",children:[e.jsx(U,{disabled:w,className:"bg-gradient-to-r from-orange-500 to-pink-500 dark:from-indigo-500 dark:to-purple-500 text-white px-8 py-3 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5 text-lg",children:"Enregistrer les modifications"}),e.jsx(S,{show:k,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:"Enregistré."})})]})]})]})})})})}export{J as default};
