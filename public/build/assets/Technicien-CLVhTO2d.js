import{r,m as E,j as e,L as D}from"./app-BkC8VWgr.js";import{S as L,C as A,D as q,G as I}from"./index-C9BLxk6X.js";import{H as P,F as H}from"./HeaderPage-DFPcx5HP.js";import{M as G}from"./Modal-BJN1yNeG.js";import{I as u}from"./InputLabel-DJrVxPwe.js";import{T as g,I as p}from"./TextInput-BkqmQp0b.js";import{f as M}from"./validateForm-B0TA_X9F.js";import{c as R,A as W,g as $,d as B}from"./AuthenticatedLayout-BevpI5nv.js";import{S as O}from"./SelectInput-DM56CVdk.js";import{g as V,n as _}from"./constant-B050u7nx.js";import"./index-C9tktaFt.js";import"./transition-CGbVp9qO.js";import"./useTheme-ZuXOj12l.js";const z=({open:b=!1,setOpen:v,onCloseFormulaire:C=()=>{}})=>{const[h,j]=r.useState("Enregistrer"),[t,l]=r.useState({}),[f,x]=r.useState(!1),{data:n,setData:o,errors:i,reset:m}=E({name:"",email:"",contact:"",password:"",adress:"",speciality:"",genre:"homme",photo:"logo.png"}),d=s=>{v(!1),N(),C(s)},N=()=>{m(),l({})},S=async()=>{if(M(n,l)){x(!0),j("Loading ..."),n.password=V(8);try{let s;h==="Enregistrer"&&({message:s}=await R(n)),d(s)}catch(s){console.error("Error submitting payment:",s)}finally{x(!1),j("Enregistrer")}}};return e.jsxs(G,{show:b,closeable:!1,onClose:d,maxWidth:"xl",children:[e.jsx("div",{className:"text-2xl font-semibold text-center",children:"Nouveau Technicien"}),e.jsxs("form",{className:"grid w-full grid-cols-1 gap-4 my-6 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"name",value:"Nom"}),e.jsx(g,{id:"name",name:"name",value:n.name,isFocused:!0,className:"block w-full mt-1",autoComplete:"name",onChange:s=>o("name",s.target.value),required:!0,onFocus:()=>l({...t,name:""})}),e.jsx(p,{message:t.name||i.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"email",value:"Email"}),e.jsx(g,{id:"email",name:"email",value:n.email,className:"block w-full mt-1",autoComplete:"email",onChange:s=>o("email",s.target.value),required:!0,onFocus:()=>l({...t,email:""})}),e.jsx(p,{message:t.email||i.email,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"genre",value:"Sexe"}),e.jsxs(O,{id:"genre",type:"genre",name:"genre",value:n.genre,className:"block w-full mt-1",autoComplete:"genre",onChange:s=>o("genre",s.target.value),required:!0,children:[e.jsx("option",{value:"homme",children:"Homme"}),e.jsx("option",{value:"femme",children:"Femme"})]}),e.jsx(p,{message:i.genre,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"contact",value:"Contact"}),e.jsx(g,{id:"contact",name:"contact",value:n.contact,className:"block w-full mt-1",autoComplete:"contact",onChange:s=>o("contact",s.target.value),required:!0,onFocus:()=>l({...t,contact:""})}),e.jsx(p,{message:t.contact||i.contact,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"adress",value:"Adresse"}),e.jsx(g,{id:"adress",name:"adress",value:n.adress,className:"block w-full mt-1",autoComplete:"adress",onChange:s=>o("adress",s.target.value),required:!0,onFocus:()=>l({...t,adress:""})}),e.jsx(p,{message:t.adress||i.adress,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"speciality",value:"Spécialité"}),e.jsx(g,{id:"speciality",name:"speciality",value:n.speciality,className:"block w-full mt-1",autoComplete:"adress",onChange:s=>o("speciality",s.target.value),required:!0,onFocus:()=>l({...t,speciality:""})}),e.jsx(p,{message:t.speciality||i.speciality,className:"mt-2"})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 px-1",children:[e.jsx("button",{type:"button",className:"px-4 py-1 text-red-500 rounded-md bg-red-400/10",onClick:()=>d(""),children:"Fermer"}),e.jsx("button",{type:"submit",className:`disabled:cursor-not-allowed rounded-md py-1 px-4 bg-blue-500 text-white ${f&&"opacity-25"}`,disabled:f,onClick:S,children:h})]})]})},re=()=>{const[b,v]=r.useState(""),[C,h]=r.useState(!1),[j,t]=r.useState(1),[l,f]=r.useState([]),[x,n]=r.useState([]),[o,i]=r.useState({open:!1,message:"",id:0}),[m,d]=r.useState({open:!1,message:"",type:"success"}),N=[{key:"id",label:"ID"},{key:"name",label:"Nom technichien"},{key:"email",label:"Adresse email"},{key:"genre",label:"Sexe"},{key:"contact",label:"Contact"},{key:"adress",label:"Adresse local"},{key:"speciality",label:"Spécialité"}],S=[{label:e.jsx(H,{className:"text-base"}),color:"text-green-500",hoverColor:"text-green-600",handler:a=>showDetail(a.id)},{label:e.jsx(I,{className:"text-base"}),color:"text-red-500",hoverColor:"text-red-600",handler:a=>k(a)}],s=async()=>{const{data:a}=await $(),y=a.map(c=>({id:c.technicien.id,name:c.name,email:c.email,genre:c.genre,contact:c.technicien.contact,adress:c.technicien.adress,speciality:c.technicien.speciality}));f(y),n(y)};r.useEffect(()=>{s()},[]);const w=a=>{v(a),t(1);const y=l.filter(c=>c.name.toLowerCase().includes(a.toLowerCase()));n(y)},F=a=>{s(),a&&d({...m,message:a,open:!0})},k=a=>{i({open:!0,message:`Êtes-vous sûr de vouloir supprimer le technicien ${a.name} ?`,id:a.id})},T=async()=>{const{message:a}=await B(o.id);d({...m,message:a,open:!0}),i({...o,open:!1,id:0}),s(),t(1)};return e.jsxs(W,{children:[e.jsx(D,{title:"Technicien"}),e.jsx(P,{handleClick:()=>h(!0),title:"Liste des Techniciens",search:b,onSearch:w}),e.jsx(z,{open:C,setOpen:h,onCloseFormulaire:F}),e.jsx(L,{message:m.message,type:m.type,duration:3e3,position:"top-right",show:m.open,onClose:()=>d({...m,message:"",open:!1})}),e.jsx(A,{open:o.open,message:o.message,btnAcceptName:"Supprimer",title:"Suppression",btnAcceptColor:"bg-red-500 text-white",close:()=>i({...o,open:!1}),accept:T}),e.jsx("div",{children:x.length>0?e.jsx(q,{headers:N,rows:x,itemsPerPage:10,actions:S,className:"mt-4",currentPage:j,onPageChange:t,masqueColumns:["client_id"]}):e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:_,alt:"no data",className:"max-w-md opacity-50 mt-2"})})})]})};export{re as default};
