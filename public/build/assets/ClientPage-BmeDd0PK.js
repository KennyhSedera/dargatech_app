import{r as s,j as a,$ as P,m as I}from"./app-rDfK0lPv.js";import{F as $}from"./FormulaireClient-ptU16i5F.js";import{C as A}from"./ConfirmDialog-Dh5Gy5zQ.js";import{D as R}from"./DataTable-DAw7IFL6.js";import{E as M}from"./EmptyState-C6VJmEbA.js";import{H as G}from"./HeaderPage-DHHyxYQY.js";import{S as H}from"./Snackbar-BwU8_hLQ.js";import{A as O,R as V}from"./AuthenticatedLayout-BkCSnvCq.js";import{b as W,d as q}from"./clientService-BKs_QZwN.js";import{j as z}from"./constant-Dm8pwftn.js";import{G as B}from"./index-DSy3v0eu.js";import{T as J,a as K}from"./index-DxcbJQeI.js";import"./Modal-ChAzlvnq.js";import"./transition-CQNLO7ua.js";import"./TextInput-DyfXA701.js";import"./createLucideIcon-CbW4KP4D.js";import"./InputLabel-D-FJS1kQ.js";import"./validateForm-f9K0gDaZ.js";import"./SelectInput-BtM3O7iT.js";import"./index-cPQ6tbku.js";import"./iconBase-kq-4DJn5.js";import"./useTheme-DGUkUsZy.js";import"./api-PtIciLz0.js";const Ce=()=>{const[d,C]=s.useState(""),[g,l]=s.useState(!1),[y,n]=s.useState(1),[u,w]=s.useState([]),[h,b]=s.useState([]),[j,f]=s.useState({}),[S,x]=s.useState(!0),[r,c]=s.useState({open:!1,message:"",id:0}),[o,m]=s.useState({open:!1,message:"",type:"success"}),p=async()=>{x(!0);const i=(await W()).clients.map(t=>({id:t.id,nom:t.nom,prenom:t.prenom,CIN:t.CIN,email:t.email,telephone:t.telephone,localisation:t.localisation,surface_cultivee:t.surface_cultivee,type_activite_agricole:t.type_activite_agricole,created_via:t.created_via}));w(i),b(i),x(!1)};s.useEffect(()=>{p()},[]);const L=e=>{C(e),n(1);const i=u.filter(t=>t.nom.toLowerCase().includes(e.toLowerCase())||t.prenom.toLowerCase().includes(e.toLowerCase())||t.telephone.toLowerCase().includes(e.toLowerCase())||t.surface_cultivee.toLowerCase().includes(e.toLowerCase())||t.type_activite_agricole.toLowerCase().includes(e.toLowerCase())||t.localisation.toLowerCase().includes(e.toLowerCase()));b(i)},v=()=>{l(!0)},N=[{key:"id",label:"ID",sortable:!0},{key:"nom",label:"Nom",sortable:!0},{key:"prenom",label:"Prénom",sortable:!0},{key:"CIN",label:"CIN"},{key:"email",label:"Email",sortable:!0},{key:"telephone",label:"Téléphone"},{key:"localisation",label:"Localisation",sortable:!0},{key:"surface_cultivee",label:"Surface cultivée (ha)",sortable:!0},{key:"type_activite_agricole",label:"Type d'activité agricole"},{key:"created_via",label:"Via",customRender:e=>a.jsx("span",{className:"text-xl font-medium text-gray-900 dark:text-white",children:e==="web"?a.jsx(K,{}):a.jsx(V,{className:"text-blue-400"})})}],_=[{label:a.jsx(z,{className:"text-base"}),color:"text-green-500",hoverColor:"text-green-600",handler:e=>F(e.id)},{label:a.jsx(J,{className:"text-lg"}),color:"text-blue-500",hoverColor:"text-blue-600",handler:e=>D(e)},{label:a.jsx(B,{className:"text-base"}),color:"text-red-500",hoverColor:"text-red-600",handler:e=>T(e)}],k=e=>{p(),e&&m({...o,message:e,open:!0}),f({})},D=e=>{f(e),l(!0)},T=e=>{c({open:!0,message:`Êtes-vous sûr de vouloir supprimer ${e.nom} ${e.prenom}?`,id:e.id})},E=async()=>{const{message:e}=await q(r.id);m({...o,message:e,open:!0}),c({...r,open:!1,id:0}),p(),n(1)},F=async e=>{I.visit(`/client/${e}`)};return a.jsxs(O,{children:[a.jsx(P,{title:"Maraîchers"}),a.jsx(G,{title:`Liste des Maraîchers ( Total: ${u.length} )`,handleClick:v,onSearch:L,search:d}),a.jsx($,{setOpen:l,open:g,dataModify:j,onCloseFormulaire:k}),a.jsx(H,{message:o.message,type:o.type,duration:3e3,position:"top-right",show:o.open,onClose:()=>m({...o,message:"",open:!1})}),a.jsx(A,{open:r.open,message:r.message,btnAcceptName:"Supprimer",title:"Suppression",btnAcceptColor:"bg-red-500 text-white",close:()=>c({...r,open:!1}),accept:E}),S?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"w-12 h-12 border-t-2 border-b-2 border-blue-500 rounded-full animate-spin"})}):a.jsx("div",{children:h.length>0?a.jsx(R,{headers:N,rows:h,itemsPerPage:10,actions:_,className:"mt-4",currentPage:y,onPageChange:n}):a.jsx(M,{nom:"maraîcher",search:d})})]})};export{Ce as default};
