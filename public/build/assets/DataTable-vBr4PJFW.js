import{r as h,q as B,j as t}from"./app-Cd5IKboC.js";function W({headers:p,rows:m,className:w="",actions:c=[],currentPage:i=1,onPageChange:f=()=>{},onItemsPerPageChange:C=()=>{},masqueColumns:b=[],itemsPerPageOptions:P=[5,8,10,25,50,100]}){const[o,I]=h.useState({key:null,direction:"asc"}),d=B().props.auth.user,L=()=>{try{const e=localStorage.getItem("itemsPerPageSettings");if(e){const s=JSON.parse(e).find(a=>a.user===d.id);return s?s.nb:10}}catch(e){console.error("Erreur lors de la lecture du localStorage:",e)}return 10},[g,D]=h.useState(L()),M=e=>{try{const n=localStorage.getItem("itemsPerPageSettings");let s=n?JSON.parse(n):[];const a=s.findIndex(r=>r.user===d.id);a!==-1?s[a].nb=e:s.push({nb:e,user:d.id}),localStorage.setItem("itemsPerPageSettings",JSON.stringify(s))}catch(n){console.error("Erreur lors de la sauvegarde dans localStorage:",n)}},$=e=>{let n="asc";o.key===e&&o.direction==="asc"&&(n="desc"),I({key:e,direction:n})},u=e=>e.sortable===!0,x=h.useMemo(()=>o.key?[...m].sort((e,n)=>{const s=e[o.key],a=n[o.key];if(s==null)return 1;if(a==null)return-1;if(typeof s=="number"&&typeof a=="number")return o.direction==="asc"?s-a:a-s;const r=new Date(s),l=new Date(a);if(!isNaN(r)&&!isNaN(l)&&s.toString().includes("-"))return o.direction==="asc"?r-l:l-r;const N=s.toString().toLowerCase(),S=a.toString().toLowerCase();return N<S?o.direction==="asc"?-1:1:N>S?o.direction==="asc"?1:-1:0}):m,[m,o]),y=i*g,k=y-g,O=x.slice(k,y),j=Math.ceil(x.length/g),v=e=>{f(e)},R=e=>{C(e),f(1),D(e),M(e)},E=e=>o.key!==e?t.jsx("svg",{className:"w-4 h-4 ml-1 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l4-4 4 4m0 6l-4 4-4-4"})}):o.direction==="asc"?t.jsx("svg",{className:"w-4 h-4 ml-1 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}):t.jsx("svg",{className:"w-4 h-4 ml-1 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})});return t.jsxs("div",{children:[t.jsx("div",{className:`overflow-auto rounded-lg shadow-sm ${w}`,children:t.jsxs("table",{className:"w-full min-w-full bg-white table-auto dark:bg-gray-800",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:t.jsxs("tr",{children:[p.map((e,n)=>!b.includes(e.key)&&t.jsx("th",{className:`px-4 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase dark:text-gray-300 ${u(e)?"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 select-none":""}`,onClick:u(e)?()=>$(e.key):void 0,children:t.jsxs("div",{className:"flex items-center",children:[e.label,u(e)&&E(e.key)]})},n)),c.length>0&&t.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-center text-gray-500 uppercase dark:text-gray-300",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:O.map((e,n)=>{var s,a;return t.jsxs("tr",{className:"transition-colors hover:bg-gray-50 dark:hover:bg-gray-700",children:[p.map((r,l)=>!b.includes(r.key)&&t.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-200",children:r.customRender?r.customRender(e[r.key],e):e[r.key]},l)),c.length>0&&((s=d.user_role)==null?void 0:s.name)!=="partenaire"&&t.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 whitespace-nowrap dark:text-gray-200",children:t.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:c.map((r,l)=>t.jsx("button",{onClick:()=>r.handler(e),className:`${r.color} rounded-md hover:${r.hoverColor} transition`,children:r.label},l))})}),c.length>0&&((a=d.user_role)==null?void 0:a.name)==="partenaire"&&t.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 whitespace-nowrap dark:text-gray-200",children:t.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:c.filter(r=>r.action===!0).map((r,l)=>t.jsx("button",{onClick:()=>r.handler(e),className:`${r.color} rounded-md hover:${r.hoverColor} transition`,children:r.label},l))})})]},n)})})]})}),t.jsxs("div",{className:"flex flex-col items-center justify-between mt-4 space-y-3 sm:flex-row sm:space-y-0",children:[t.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Page ",i," sur ",j," (éléments"," ",k+1," à"," ",Math.min(y,x.length)," sur"," ",x.length,")"]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("label",{htmlFor:"itemsPerPage",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Afficher :"}),t.jsx("select",{id:"itemsPerPage",value:g,onChange:e=>R(Number(e.target.value)),className:"w-16 px-2 py-1 text-sm bg-transparent border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:border-gray-600 dark:text-gray-200",children:P.map(e=>t.jsx("option",{className:"bg-gray-200 dark:bg-gray-800",value:e,children:e},e))})]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>v(i-1),disabled:i===1,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed dark:text-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600",children:"Précédent"}),t.jsx("button",{onClick:()=>v(i+1),disabled:i===j,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed dark:text-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600",children:"Suivant"})]})]})]})]})}export{W as D};
